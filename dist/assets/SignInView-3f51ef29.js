import{d as x,u as O,a as q,b as G,c as H,i as V,r as w,e as B,o as J,f as y,g,h as e,j as m,k,l as K,p as z,m as E,n as p,_ as Z,B as M,q as X,s as Q,t as T,v as W}from"./index-3116a59f.js";import{s as L}from"./services-39e6a1b0.js";const Y="http://222.107.124.161:64000/assets/ai-af355b3c.gif",P={join:"/api/auth/join",login:"/api/auth/login",googleLogin:"/api/auth/oauth/google"},R=o=>(z("data-v-d0d59816"),o=o(),E(),o),ee={class:"sign-in-form"},se=R(()=>e("legend",{class:"legend"},"PIXELL AI",-1)),te={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne={key:0,class:"guide-message"},le={class:"row"},ie=R(()=>e("div",{class:"row"},[e("span",{class:"or"},"OR")],-1)),re={class:"row"},ue={class:"row"},ce=R(()=>e("span",{class:"question-txt"},"Don’t Have a Acount?",-1)),de=x({__name:"SignIn",emits:["update:route"],setup(o,{emit:_}){const{cookies:n}=O(),l=q(),i=G().params.code,h=H(),C=V("defaultInstance"),v=w(""),r=w(""),a=B({id:!1,pw:!1}),s=V("emitter"),S=()=>{K().then(d=>{console.log(d),C.get(P.googleLogin,{headers:{token:d.token_type+" "+d.access_token}}).then(u=>{console.log(u),n.set("token",u.data.data),h.putUserInfo({token:u.data.data}),l.push("/main")})})},$=()=>{v.value.trim().length==0?a.id=!0:a.id=!1,r.value.trim().length==0?a.pw=!0:a.pw=!1,!a.id&&!a.pw&&C.get(P.login,{headers:{userId:v.value,password:r.value}}).then(d=>{console.log(d.headers.authorization),n.set("token",d.headers.authorization),h.putUserInfo({token:d.headers.authorization}),l.push("/main")}).catch(d=>{s.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},U=()=>{C.patch(L.userJoin+`?mailConfirmCode=${i}`).then(d=>{console.log(d),s.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),l.push("/sign-in")})};return J(()=>{i.length==1&&U()}),(d,u)=>{const b=y("BaseInput"),t=y("BaseButton");return p(),g("form",ee,[e("fieldset",null,[se,e("div",te,[m(b,{type:"text","onUpdate:enterEvent":$,"onUpdate:modelValue":u[0]||(u[0]=c=>v.value=c),modelValue:v.value,placeholder:"ID"},null,8,["modelValue"]),a.id?(p(),g("p",ae,"Please enter your ID.")):k("",!0)]),e("div",oe,[m(b,{type:"password","onUpdate:enterEvent":$,"onUpdate:modelValue":u[1]||(u[1]=c=>{r.value=c}),modelValue:r.value,placeholder:"Password"},null,8,["modelValue"]),a.pw?(p(),g("p",ne," Please enter a password. ")):k("",!0)]),e("div",le,[m(t,{text:"Log In",onClick:$})]),ie,e("div",{class:"row"},[e("div",{class:"google-sign-in-area"},[e("button",{type:"button",class:"google-sign-in",onClick:S}," Continue with Google ")])]),e("div",re,[e("button",{type:"button",class:"find-password-link",onClick:u[2]||(u[2]=c=>_("update:route","ChangePassword"))}," Forget password? ")]),e("div",ue,[ce,e("button",{type:"button",class:"sign-up-link",onClick:u[3]||(u[3]=c=>_("update:route","SignUp"))}," Sign Up ")])])])}}});const F=Z(de,[["__scopeId","data-v-d0d59816"]]),I=o=>(z("data-v-11445b8e"),o=o(),E(),o),me=I(()=>e("legend",{class:"legend"},"Create an Account",-1)),pe={class:"row"},_e=I(()=>e("button",{class:"google-sign-up"},null,-1)),ge=I(()=>e("div",{class:"row"},[e("span",{class:"or"},"OR Create Acount via Email")],-1)),fe={class:"row name-area"},he={class:"first-name-area"},ve=I(()=>e("label",null,"First Name",-1)),we={key:0,class:"guide-message"},ke={class:"last-name-area"},Ie=I(()=>e("label",null,"Last Name",-1)),Ce={key:0,class:"guide-message"},ye={class:"row"},Ve=I(()=>e("label",null,"Email Address",-1)),$e={key:0,class:"guide-message"},Ae={class:"row"},Se=I(()=>e("label",null,"Password",-1)),be={key:0,class:"guide-message"},xe={class:"row"},Ue=I(()=>e("label",null,"Password Confirm",-1)),Ne={key:0,class:"guide-message"},Pe={class:"row"},Be=x({__name:"SignUp",emits:["update:route"],setup(o,{emit:_}){const n=w(""),l=w(""),f=w(""),i=w(""),h=w(""),C=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,v=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,r=V("defaultInstance"),a=V("emitter"),s=B({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),S=t=>{n.value=t,n.value.trim().length>0?s.firstName=!1:s.firstName=!0},$=t=>{l.value=t,l.value.trim().length>0?s.lastName=!1:s.lastName=!0},U=t=>{const c=v.test(t);f.value=t,c?s.email=!1:s.email=!0},d=t=>{const c=C.test(t);i.value=t,c?s.pw=!1:s.pw=!0},u=t=>{h.value=t,i.value!==h.value?s.pwConfirm=!0:s.pwConfirm=!1},b=()=>{n.value.trim().length==0&&(s.firstName=!0),l.value.trim().length==0&&(s.lastName=!0),f.value.trim().length==0&&(s.email=!0),i.value.trim().length==0&&(s.pw=!0),h.value.trim().length==0&&(s.pwConfirm=!0),Object.values(s).indexOf(!0)==-1&&r.post(P.join,{firstName:n.value,lastName:l.value,password:i.value,email:f.value,role:"user"}).then(t=>{"data"in t.data&&(_("update:route","SignIn"),a.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다."}))}).catch(t=>{a.emit("update:alert",{isActive:!0,message:"이미 존재하는 아이디입니다."})})};return(t,c)=>{const j=y("FontAwesomeIcon"),A=y("BaseInput"),D=y("BaseButton");return p(),g("form",{class:"sign-up-form",onKeydown:c[1]||(c[1]=N=>{N.keyCode===13&&N.preventDefault()})},[e("fieldset",null,[me,e("div",pe,[_e,m(j,{icon:"xmark",class:"close-button",onClick:c[0]||(c[0]=N=>_("update:route","SignIn"))})]),ge,e("div",fe,[e("div",he,[ve,m(A,{type:"text","onUpdate:modelValue":S,modelValue:n.value,placeholder:"first name"},null,8,["modelValue"]),s.firstName?(p(),g("p",we," Please enter your first name. ")):k("",!0)]),e("div",ke,[Ie,m(A,{type:"text","onUpdate:modelValue":$,modelValue:l.value,placeholder:"last name"},null,8,["modelValue"]),s.lastName?(p(),g("p",Ce," Please enter your last name. ")):k("",!0)])]),e("div",ye,[Ve,m(A,{type:"text","onUpdate:modelValue":U,modelValue:f.value,placeholder:"email"},null,8,["modelValue"]),s.email?(p(),g("p",$e," Please enter the correct email format. ")):k("",!0)]),e("div",Ae,[Se,m(A,{type:"password","onUpdate:modelValue":d,modelValue:i.value,placeholder:"password"},null,8,["modelValue"]),s.pw?(p(),g("p",be," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):k("",!0)]),e("div",xe,[Ue,m(A,{type:"password","onUpdate:modelValue":u,modelValue:h.value,placeholder:"password confirm"},null,8,["modelValue"]),s.pwConfirm?(p(),g("p",Ne," Passwords do not match. ")):k("",!0)]),e("div",Pe,[m(D,{text:"Create an Account",onClick:b})])])],32)}}});const ze=Z(Be,[["__scopeId","data-v-11445b8e"]]),Ee={class:"change-email-wrapper"},Ze=e("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),Re={key:0,class:"guide-message"},Fe=x({__name:"ChangePassword",emits:["update:route"],setup(o,{emit:_}){const n=w(""),l=V("defaultInstance"),f=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,i=B({email:!1}),h=V("emitter"),C=r=>{const a=f.test(r);n.value=r,a?i.email=!1:i.email=!0},v=()=>{n.value.trim().length==0&&(i.email=!0),i.email||l.get(L.sendEmailPassword+`?email=${n.value}`).then(r=>{console.log(r),h.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."})}).catch(r=>{console.log(r),h.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})})};return(r,a)=>{const s=y("FontAwesomeIcon");return p(),g("div",Ee,[m(s,{icon:"xmark",class:"close-button",onClick:a[0]||(a[0]=S=>_("update:route","SignIn"))}),Ze,m(M,{"onUpdate:modelValue":C,modelValue:n.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),i.email?(p(),g("p",Re," 올바른 이메일 형식을 입력해주세요. ")):k("",!0),m(X,{type:"button",text:"Send password reset email",onClick:v})])}}});const Le=o=>(z("data-v-fd193814"),o=o(),E(),o),je=Le(()=>e("img",{src:Y,class:"bg"},null,-1)),De=x({__name:"SignInView",setup(o){const _=Q(F);return(n,l)=>(p(),g("main",null,[je,(p(),T(W(_.value),{"onUpdate:route":l[0]||(l[0]=f=>{console.log(f),f=="SignUp"?_.value=ze:f=="ChangePassword"?_.value=Fe:_.value=F})},null,32))]))}});const Ge=Z(De,[["__scopeId","data-v-fd193814"]]);export{Ge as default};
