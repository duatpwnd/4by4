import{d as x,u as D,a as F,b as O,c as J,i as k,r as I,e as N,o as K,f as S,g as _,h as t,j as f,k as C,p as B,l as b,m as c,_ as z,B as M,n as X,s as G,q as H,t as Q}from"./index-9b5efed5.js";import{s as Z}from"./services-73bde18f.js";const T="http://222.107.124.161:64000/assets/ai-af355b3c.gif",R={join:"/auth/join",login:"/auth/login",googleLogin:"/auth/oauth/google"},q=a=>(B("data-v-873064ff"),a=a(),b(),a),W={class:"sign-in-form"},Y=q(()=>t("legend",{class:"legend"},"PIXELL AI",-1)),ee={class:"row"},te={key:0,class:"guide-message"},se={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne={class:"row"},le={class:"row"},ie=q(()=>t("span",{class:"question-txt"},"Don’t have an account?",-1)),re=x({__name:"SignIn",emits:["update:route"],setup(a,{emit:g}){const{cookies:u}=D(),l=F(),d=O(),i=d.params.code,m=J(),y=k("defaultInstance"),v=I(""),o=I(""),n=d.query.referrer,e=N({id:!1,pw:!1}),$=k("emitter"),A=()=>{v.value.trim().length==0?e.id=!0:e.id=!1,o.value.trim().length==0?e.pw=!0:e.pw=!1,!e.id&&!e.pw&&y.get(R.login,{headers:{userId:v.value,password:o.value},transformRequest:(w,p)=>{delete p.Authorization}}).then(w=>{u.set("token",w.headers.authorization),m.putUserInfo({token:w.headers.authorization}),n==null?l.push("/main"):l.push(`/${n}`)}).catch(w=>{$.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},P=()=>{y.patch(Z.userJoin+`?mailConfirmCode=${i}`).then(w=>{$.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),l.push("/sign-in")})};return K(()=>{i.length==1&&P()}),(w,p)=>{const h=S("BaseInput"),s=S("BaseButton");return c(),_("form",W,[t("fieldset",null,[Y,t("div",ee,[f(h,{type:"text","onUpdate:enterEvent":A,"onUpdate:modelValue":p[0]||(p[0]=r=>v.value=r),modelValue:v.value,placeholder:"ID"},null,8,["modelValue"]),e.id?(c(),_("p",te,"Please enter your ID.")):C("",!0)]),t("div",se,[f(h,{type:"password","onUpdate:enterEvent":A,"onUpdate:modelValue":p[1]||(p[1]=r=>{o.value=r}),modelValue:o.value,placeholder:"Password"},null,8,["modelValue"]),e.pw?(c(),_("p",ae," Please enter a password. ")):C("",!0)]),t("div",oe,[f(s,{text:"Log In",onClick:A})]),t("div",ne,[t("button",{type:"button",class:"find-password-link",onClick:p[2]||(p[2]=r=>g("update:route","ChangePassword"))}," Forgot password? ")]),t("div",le,[ie,t("button",{type:"button",class:"sign-up-link",onClick:p[3]||(p[3]=r=>g("update:route","SignUp"))}," Sign Up ")])])])}}});const L=z(re,[["__scopeId","data-v-873064ff"]]),V=a=>(B("data-v-a72d2423"),a=a(),b(),a),ue=V(()=>t("legend",{class:"legend"},"Create an Account",-1)),de={class:"row name-area"},ce={class:"first-name-area"},me=V(()=>t("label",null,"First Name",-1)),pe={key:0,class:"guide-message"},_e={class:"last-name-area"},fe=V(()=>t("label",null,"Last Name",-1)),ge={key:0,class:"guide-message"},he={class:"row"},ve=V(()=>t("label",null,"Email Address",-1)),we={key:0,class:"guide-message"},Ie={class:"row"},Ce=V(()=>t("label",null,"Password",-1)),ye={key:0,class:"guide-message"},ke={class:"row"},Ve=V(()=>t("label",null,"Confirm Password",-1)),$e={key:0,class:"guide-message"},Ae={class:"row"},Ue=x({__name:"SignUp",emits:["update:route"],setup(a,{emit:g}){const u=I(""),l=I(""),d=I(""),i=I(""),m=I(""),y=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,v=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,o=k("defaultInstance"),n=k("emitter"),e=N({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),$=s=>{u.value=s,u.value.trim().length>0?e.firstName=!1:e.firstName=!0},A=s=>{l.value=s,l.value.trim().length>0?e.lastName=!1:e.lastName=!0},P=s=>{const r=v.test(s);d.value=s,r?e.email=!1:e.email=!0},w=s=>{const r=y.test(s);i.value=s,r?e.pw=!1:e.pw=!0},p=s=>{m.value=s,i.value!==m.value?e.pwConfirm=!0:e.pwConfirm=!1},h=()=>{u.value.trim().length==0&&(e.firstName=!0),l.value.trim().length==0&&(e.lastName=!0),d.value.trim().length==0&&(e.email=!0),i.value.trim().length==0&&(e.pw=!0),m.value.trim().length==0&&(e.pwConfirm=!0),Object.values(e).indexOf(!0)==-1&&(n.emit("update:loading",{isLoading:!0}),o.post(R.join,{transformRequest:(s,r)=>(delete r.Authorization,{firstName:u.value,lastName:l.value,password:i.value,email:d.value,role:"user",host:location.host})}).then(s=>{"data"in s.data&&(n.emit("update:loading",{isLoading:!1}),n.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다.",closeFn:()=>{g("update:route","SignIn")}}))}).catch(s=>{n.emit("update:loading",{isLoading:!1}),n.emit("update:alert",{isActive:!0,message:"이미 존재하는 이메일입니다."})}))};return(s,r)=>{const U=S("BaseInput"),j=S("BaseButton");return c(),_("form",{class:"sign-up-form",onKeydown:r[0]||(r[0]=E=>{E.keyCode===13&&E.preventDefault()})},[t("fieldset",null,[ue,t("div",de,[t("div",ce,[me,f(U,{type:"text","onUpdate:modelValue":$,"onUpdate:enterEvent":h,modelValue:u.value,placeholder:"first name"},null,8,["modelValue"]),e.firstName?(c(),_("p",pe," Please enter your first name. ")):C("",!0)]),t("div",_e,[fe,f(U,{type:"text","onUpdate:modelValue":A,"onUpdate:enterEvent":h,modelValue:l.value,placeholder:"last name"},null,8,["modelValue"]),e.lastName?(c(),_("p",ge," Please enter your last name. ")):C("",!0)])]),t("div",he,[ve,f(U,{type:"text","onUpdate:modelValue":P,"onUpdate:enterEvent":h,modelValue:d.value,placeholder:"email"},null,8,["modelValue"]),e.email?(c(),_("p",we," Please enter the correct email format. ")):C("",!0)]),t("div",Ie,[Ce,f(U,{type:"password","onUpdate:modelValue":w,"onUpdate:enterEvent":h,modelValue:i.value,placeholder:"password"},null,8,["modelValue"]),e.pw?(c(),_("p",ye," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):C("",!0)]),t("div",ke,[Ve,f(U,{type:"password","onUpdate:modelValue":p,"onUpdate:enterEvent":h,modelValue:m.value,placeholder:"Confirm Password"},null,8,["modelValue"]),e.pwConfirm?(c(),_("p",$e," Passwords do not match. ")):C("",!0)]),t("div",Ae,[f(j,{text:"Create an Account",onClick:h})])])],32)}}});const Se=z(Ue,[["__scopeId","data-v-a72d2423"]]),xe={class:"change-email-wrapper"},Pe=t("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),Ne={key:0,class:"guide-message"},Be=x({__name:"ChangePassword",emits:["update:route"],setup(a,{emit:g}){const u=I(""),l=k("defaultInstance"),d=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,i=N({email:!1}),m=k("emitter"),y=o=>{const n=d.test(o);u.value=o,n?i.email=!1:i.email=!0},v=()=>{u.value.trim().length==0&&(i.email=!0),i.email||(m.emit("update:loading",{isLoading:!0}),l.get(Z.sendEmailPassword+`?email=${u.value}&host=${location.host}`,{transformRequest:(o,n)=>{delete n.Authorization}}).then(o=>{console.log(o),m.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),m.emit("update:loading",{isLoading:!1})}).catch(o=>{console.log(o),m.emit("update:loading",{isLoading:!1}),m.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(o,n)=>{const e=S("FontAwesomeIcon");return c(),_("div",xe,[f(e,{icon:"xmark",class:"close-button",onClick:n[0]||(n[0]=$=>g("update:route","SignIn"))}),Pe,f(M,{"onUpdate:modelValue":y,modelValue:u.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),i.email?(c(),_("p",Ne," 올바른 이메일 형식을 입력해주세요. ")):C("",!0),f(X,{type:"button",text:"Send password reset email",onClick:v})])}}});const be=a=>(B("data-v-fd193814"),a=a(),b(),a),ze=be(()=>t("img",{src:T,class:"bg"},null,-1)),Ee=x({__name:"SignInView",setup(a){const g=G(L);return(u,l)=>(c(),_("main",null,[ze,(c(),H(Q(g.value),{"onUpdate:route":l[0]||(l[0]=d=>{console.log(d),d=="SignUp"?g.value=Se:d=="ChangePassword"?g.value=Be:g.value=L})},null,32))]))}});const Re=z(Ee,[["__scopeId","data-v-fd193814"]]);export{Re as default};
