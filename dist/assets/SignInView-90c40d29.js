import{d as x,u as O,a as q,b as G,c as H,i as V,r as w,e as B,o as J,f as y,g as f,h as e,j as p,k,l as K,p as z,m as L,n as _,_ as E,B as M,q as X,s as Q,t as T,v as W}from"./index-837a8757.js";import{s as F}from"./services-39e6a1b0.js";const Y="http://172.168.10.91:49090/assets/ai-af355b3c.gif",P={join:"/api/auth/join",login:"/api/auth/login",googleLogin:"/api/auth/oauth/google"},Z=o=>(z("data-v-d0d59816"),o=o(),L(),o),ee={class:"sign-in-form"},te=Z(()=>e("legend",{class:"legend"},"PIXELL AI",-1)),se={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne={key:0,class:"guide-message"},le={class:"row"},ie=Z(()=>e("div",{class:"row"},[e("span",{class:"or"},"OR")],-1)),de={class:"row"},re={class:"row"},ue=Z(()=>e("span",{class:"question-txt"},"Don’t Have a Acount?",-1)),ce=x({__name:"SignIn",emits:["update:route"],setup(o,{emit:g}){const{cookies:n}=O(),l=q(),i=G().params.code,c=H(),C=V("defaultInstance"),v=w(""),d=w(""),s=B({id:!1,pw:!1}),t=V("emitter"),S=()=>{K().then(m=>{console.log(m),C.get(P.googleLogin,{headers:{token:m.token_type+" "+m.access_token}}).then(r=>{console.log(r),n.set("token",r.data.data),c.putUserInfo({token:r.data.data}),l.push("/main")})})},$=()=>{v.value.trim().length==0?s.id=!0:s.id=!1,d.value.trim().length==0?s.pw=!0:s.pw=!1,!s.id&&!s.pw&&C.get(P.login,{headers:{userId:v.value,password:d.value}}).then(m=>{console.log(m.headers.authorization),n.set("token",m.headers.authorization),c.putUserInfo({token:m.headers.authorization}),l.push("/main")}).catch(m=>{t.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},U=()=>{C.patch(F.userJoin+`?mailConfirmCode=${i}`).then(m=>{console.log(m),t.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),l.push("/sign-in")})};return J(()=>{i.length==1&&U()}),(m,r)=>{const b=y("BaseInput"),a=y("BaseButton");return _(),f("form",ee,[e("fieldset",null,[te,e("div",se,[p(b,{type:"text","onUpdate:enterEvent":$,"onUpdate:modelValue":r[0]||(r[0]=u=>v.value=u),modelValue:v.value,placeholder:"ID"},null,8,["modelValue"]),s.id?(_(),f("p",ae,"Please enter your ID.")):k("",!0)]),e("div",oe,[p(b,{type:"password","onUpdate:enterEvent":$,"onUpdate:modelValue":r[1]||(r[1]=u=>{d.value=u}),modelValue:d.value,placeholder:"Password"},null,8,["modelValue"]),s.pw?(_(),f("p",ne," Please enter a password. ")):k("",!0)]),e("div",le,[p(a,{text:"Log In",onClick:$})]),ie,e("div",{class:"row"},[e("div",{class:"google-sign-in-area"},[e("button",{type:"button",class:"google-sign-in",onClick:S}," Continue with Google ")])]),e("div",de,[e("button",{type:"button",class:"find-password-link",onClick:r[2]||(r[2]=u=>g("update:route","ChangePassword"))}," Forget password? ")]),e("div",re,[ue,e("button",{type:"button",class:"sign-up-link",onClick:r[3]||(r[3]=u=>g("update:route","SignUp"))}," Sign Up ")])])])}}});const R=E(ce,[["__scopeId","data-v-d0d59816"]]),I=o=>(z("data-v-948cb46f"),o=o(),L(),o),me=I(()=>e("legend",{class:"legend"},"Create an Account",-1)),pe={class:"row"},_e=I(()=>e("button",{class:"google-sign-up"},null,-1)),ge=I(()=>e("div",{class:"row"},[e("span",{class:"or"},"OR Create Acount via Email")],-1)),fe={class:"row name-area"},he={class:"first-name-area"},ve=I(()=>e("label",null,"First Name",-1)),we={key:0,class:"guide-message"},ke={class:"last-name-area"},Ie=I(()=>e("label",null,"Last Name",-1)),Ce={key:0,class:"guide-message"},ye={class:"row"},Ve=I(()=>e("label",null,"Email Address",-1)),$e={key:0,class:"guide-message"},Ae={class:"row"},Se=I(()=>e("label",null,"Password",-1)),be={key:0,class:"guide-message"},xe={class:"row"},Ue=I(()=>e("label",null,"Password Confirm",-1)),Ne={key:0,class:"guide-message"},Pe={class:"row"},Be=x({__name:"SignUp",emits:["update:route"],setup(o,{emit:g}){const n=w(""),l=w(""),h=w(""),i=w(""),c=w(""),C=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,v=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,d=V("defaultInstance"),s=V("emitter"),t=B({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),S=a=>{n.value=a,n.value.trim().length>0?t.firstName=!1:t.firstName=!0},$=a=>{l.value=a,l.value.trim().length>0?t.lastName=!1:t.lastName=!0},U=a=>{const u=v.test(a);h.value=a,u?t.email=!1:t.email=!0},m=a=>{const u=C.test(a);i.value=a,u?t.pw=!1:t.pw=!0},r=a=>{c.value=a,i.value!==c.value?t.pwConfirm=!0:t.pwConfirm=!1},b=()=>{n.value.trim().length==0&&(t.firstName=!0),l.value.trim().length==0&&(t.lastName=!0),h.value.trim().length==0&&(t.email=!0),i.value.trim().length==0&&(t.pw=!0),c.value.trim().length==0&&(t.pwConfirm=!0),Object.values(t).indexOf(!0)==-1&&(s.emit("update:loading",{isLoading:!0}),d.post(P.join,{firstName:n.value,lastName:l.value,password:i.value,email:h.value,role:"user"}).then(a=>{"data"in a.data&&(g("update:route","SignIn"),s.emit("update:loading",{isLoading:!1}),s.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다."}))}).catch(a=>{s.emit("update:loading",{isLoading:!1}),s.emit("update:alert",{isActive:!0,message:"이미 존재하는 아이디입니다."})}))};return(a,u)=>{const j=y("FontAwesomeIcon"),A=y("BaseInput"),D=y("BaseButton");return _(),f("form",{class:"sign-up-form",onKeydown:u[1]||(u[1]=N=>{N.keyCode===13&&N.preventDefault()})},[e("fieldset",null,[me,e("div",pe,[_e,p(j,{icon:"xmark",class:"close-button",onClick:u[0]||(u[0]=N=>g("update:route","SignIn"))})]),ge,e("div",fe,[e("div",he,[ve,p(A,{type:"text","onUpdate:modelValue":S,modelValue:n.value,placeholder:"first name"},null,8,["modelValue"]),t.firstName?(_(),f("p",we," Please enter your first name. ")):k("",!0)]),e("div",ke,[Ie,p(A,{type:"text","onUpdate:modelValue":$,modelValue:l.value,placeholder:"last name"},null,8,["modelValue"]),t.lastName?(_(),f("p",Ce," Please enter your last name. ")):k("",!0)])]),e("div",ye,[Ve,p(A,{type:"text","onUpdate:modelValue":U,modelValue:h.value,placeholder:"email"},null,8,["modelValue"]),t.email?(_(),f("p",$e," Please enter the correct email format. ")):k("",!0)]),e("div",Ae,[Se,p(A,{type:"password","onUpdate:modelValue":m,modelValue:i.value,placeholder:"password"},null,8,["modelValue"]),t.pw?(_(),f("p",be," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):k("",!0)]),e("div",xe,[Ue,p(A,{type:"password","onUpdate:modelValue":r,modelValue:c.value,placeholder:"password confirm"},null,8,["modelValue"]),t.pwConfirm?(_(),f("p",Ne," Passwords do not match. ")):k("",!0)]),e("div",Pe,[p(D,{text:"Create an Account",onClick:b})])])],32)}}});const ze=E(Be,[["__scopeId","data-v-948cb46f"]]),Le={class:"change-email-wrapper"},Ee=e("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),Ze={key:0,class:"guide-message"},Re=x({__name:"ChangePassword",emits:["update:route"],setup(o,{emit:g}){const n=w(""),l=V("defaultInstance"),h=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,i=B({email:!1}),c=V("emitter"),C=d=>{const s=h.test(d);n.value=d,s?i.email=!1:i.email=!0},v=()=>{n.value.trim().length==0&&(i.email=!0),i.email||(c.emit("update:loading",{isLoading:!0}),l.get(F.sendEmailPassword+`?email=${n.value}`).then(d=>{console.log(d),c.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),c.emit("update:loading",{isLoading:!1})}).catch(d=>{console.log(d),c.emit("update:loading",{isLoading:!1}),c.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(d,s)=>{const t=y("FontAwesomeIcon");return _(),f("div",Le,[p(t,{icon:"xmark",class:"close-button",onClick:s[0]||(s[0]=S=>g("update:route","SignIn"))}),Ee,p(M,{"onUpdate:modelValue":C,modelValue:n.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),i.email?(_(),f("p",Ze," 올바른 이메일 형식을 입력해주세요. ")):k("",!0),p(X,{type:"button",text:"Send password reset email",onClick:v})])}}});const Fe=o=>(z("data-v-fd193814"),o=o(),L(),o),je=Fe(()=>e("img",{src:Y,class:"bg"},null,-1)),De=x({__name:"SignInView",setup(o){const g=Q(R);return(n,l)=>(_(),f("main",null,[je,(_(),T(W(g.value),{"onUpdate:route":l[0]||(l[0]=h=>{console.log(h),h=="SignUp"?g.value=ze:h=="ChangePassword"?g.value=Re:g.value=R})},null,32))]))}});const Ge=E(De,[["__scopeId","data-v-fd193814"]]);export{Ge as default};
