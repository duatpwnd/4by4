import{d as x,u as D,a as F,b as O,c as J,i as k,r as w,e as b,o as K,f as S,g as _,h as s,j as g,k as C,p as U,l as B,m as d,_ as z,B as M,n as X,s as G,q as H,t as Q}from"./index-d68af4e0.js";import{s as R}from"./services-73bde18f.js";const T="http://222.107.124.161:64000/assets/ai-af355b3c.gif",j={join:"/auth/join",login:"/auth/login",googleLogin:"/auth/oauth/google"},L=a=>(U("data-v-05178562"),a=a(),B(),a),W={class:"sign-in-form"},Y=L(()=>s("legend",{class:"legend"},"PIXELL AI",-1)),ee={class:"row"},se={key:0,class:"guide-message"},te={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne=L(()=>s("div",{class:"row"},[s("span",{class:"or"},"OR")],-1)),le={class:"row"},ie={class:"row"},re=L(()=>s("span",{class:"question-txt"},"Don’t have an account?",-1)),ue=x({__name:"SignIn",emits:["update:route"],setup(a,{emit:f}){const{cookies:r}=D(),o=F(),u=O(),n=u.params.code,c=J(),y=k("defaultInstance"),h=w(""),l=w(""),i=u.query.referrer,e=b({id:!1,pw:!1}),V=k("emitter"),$=()=>{h.value.trim().length==0?e.id=!0:e.id=!1,l.value.trim().length==0?e.pw=!0:e.pw=!1,!e.id&&!e.pw&&y.get(j.login,{headers:{userId:h.value,password:l.value},transformRequest:(v,m)=>{delete m.Authorization}}).then(v=>{r.set("token",v.headers.authorization),c.putUserInfo({token:v.headers.authorization}),i==null?o.push("/main"):o.push(`/${i}`)}).catch(v=>{V.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},P=()=>{y.patch(R.userJoin+`?mailConfirmCode=${n}`).then(v=>{V.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),o.push("/sign-in")})};return K(()=>{n.length==1&&P()}),(v,m)=>{const N=S("BaseInput"),t=S("BaseButton");return d(),_("form",W,[s("fieldset",null,[Y,s("div",ee,[g(N,{type:"text","onUpdate:enterEvent":$,"onUpdate:modelValue":m[0]||(m[0]=p=>h.value=p),modelValue:h.value,placeholder:"ID"},null,8,["modelValue"]),e.id?(d(),_("p",se,"Please enter your ID.")):C("",!0)]),s("div",te,[g(N,{type:"password","onUpdate:enterEvent":$,"onUpdate:modelValue":m[1]||(m[1]=p=>{l.value=p}),modelValue:l.value,placeholder:"Password"},null,8,["modelValue"]),e.pw?(d(),_("p",ae," Please enter a password. ")):C("",!0)]),s("div",oe,[g(t,{text:"Log In",onClick:$})]),ne,s("div",le,[s("button",{type:"button",class:"find-password-link",onClick:m[2]||(m[2]=p=>f("update:route","ChangePassword"))}," Forgot password? ")]),s("div",ie,[re,s("button",{type:"button",class:"sign-up-link",onClick:m[3]||(m[3]=p=>f("update:route","SignUp"))}," Sign Up ")])])])}}});const Z=z(ue,[["__scopeId","data-v-05178562"]]),I=a=>(U("data-v-126e58b3"),a=a(),B(),a),de=I(()=>s("legend",{class:"legend"},"Create an Account",-1)),ce=I(()=>s("div",{class:"row"},[s("span",{class:"or"},"OR Create Account via Email")],-1)),me={class:"row name-area"},pe={class:"first-name-area"},_e=I(()=>s("label",null,"First Name",-1)),ge={key:0,class:"guide-message"},fe={class:"last-name-area"},he=I(()=>s("label",null,"Last Name",-1)),ve={key:0,class:"guide-message"},we={class:"row"},Ce=I(()=>s("label",null,"Email Address",-1)),Ie={key:0,class:"guide-message"},ye={class:"row"},ke=I(()=>s("label",null,"Password",-1)),Ve={key:0,class:"guide-message"},$e={class:"row"},Ae=I(()=>s("label",null,"Confirm Password",-1)),Se={key:0,class:"guide-message"},Ne={class:"row"},xe=x({__name:"SignUp",emits:["update:route"],setup(a,{emit:f}){const r=w(""),o=w(""),u=w(""),n=w(""),c=w(""),y=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,h=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,l=k("defaultInstance"),i=k("emitter"),e=b({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),V=t=>{r.value=t,r.value.trim().length>0?e.firstName=!1:e.firstName=!0},$=t=>{o.value=t,o.value.trim().length>0?e.lastName=!1:e.lastName=!0},P=t=>{const p=h.test(t);u.value=t,p?e.email=!1:e.email=!0},v=t=>{const p=y.test(t);n.value=t,p?e.pw=!1:e.pw=!0},m=t=>{c.value=t,n.value!==c.value?e.pwConfirm=!0:e.pwConfirm=!1},N=()=>{r.value.trim().length==0&&(e.firstName=!0),o.value.trim().length==0&&(e.lastName=!0),u.value.trim().length==0&&(e.email=!0),n.value.trim().length==0&&(e.pw=!0),c.value.trim().length==0&&(e.pwConfirm=!0),Object.values(e).indexOf(!0)==-1&&(i.emit("update:loading",{isLoading:!0}),console.log("회원가입 obj:",{firstName:r.value,lastName:o.value,password:n.value,email:u.value,role:"user"}),l.post(j.join,{firstName:r.value,lastName:o.value,password:n.value,email:u.value,role:"user",host:location.host}).then(t=>{"data"in t.data&&(i.emit("update:loading",{isLoading:!1}),i.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다.",closeFn:()=>{f("update:route","SignIn")}}))}).catch(t=>{i.emit("update:loading",{isLoading:!1}),i.emit("update:alert",{isActive:!0,message:"이미 존재하는 이메일입니다."})}))};return(t,p)=>{const A=S("BaseInput"),q=S("BaseButton");return d(),_("form",{class:"sign-up-form",onKeydown:p[0]||(p[0]=E=>{E.keyCode===13&&E.preventDefault()})},[s("fieldset",null,[de,ce,s("div",me,[s("div",pe,[_e,g(A,{type:"text","onUpdate:modelValue":V,modelValue:r.value,placeholder:"first name"},null,8,["modelValue"]),e.firstName?(d(),_("p",ge," Please enter your first name. ")):C("",!0)]),s("div",fe,[he,g(A,{type:"text","onUpdate:modelValue":$,modelValue:o.value,placeholder:"last name"},null,8,["modelValue"]),e.lastName?(d(),_("p",ve," Please enter your last name. ")):C("",!0)])]),s("div",we,[Ce,g(A,{type:"text","onUpdate:modelValue":P,modelValue:u.value,placeholder:"email"},null,8,["modelValue"]),e.email?(d(),_("p",Ie," Please enter the correct email format. ")):C("",!0)]),s("div",ye,[ke,g(A,{type:"password","onUpdate:modelValue":v,modelValue:n.value,placeholder:"password"},null,8,["modelValue"]),e.pw?(d(),_("p",Ve," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):C("",!0)]),s("div",$e,[Ae,g(A,{type:"password","onUpdate:modelValue":m,modelValue:c.value,placeholder:"Confirm Password"},null,8,["modelValue"]),e.pwConfirm?(d(),_("p",Se," Passwords do not match. ")):C("",!0)]),s("div",Ne,[g(q,{text:"Create an Account",onClick:N})])])],32)}}});const Pe=z(xe,[["__scopeId","data-v-126e58b3"]]),be={class:"change-email-wrapper"},Ue=s("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),Be={key:0,class:"guide-message"},ze=x({__name:"ChangePassword",emits:["update:route"],setup(a,{emit:f}){const r=w(""),o=k("defaultInstance"),u=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,n=b({email:!1}),c=k("emitter"),y=l=>{const i=u.test(l);r.value=l,i?n.email=!1:n.email=!0},h=()=>{r.value.trim().length==0&&(n.email=!0),n.email||(c.emit("update:loading",{isLoading:!0}),o.get(R.sendEmailPassword+`?email=${r.value}&host=${location.host}`,{transformRequest:(l,i)=>{delete i.Authorization}}).then(l=>{console.log(l),c.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),c.emit("update:loading",{isLoading:!1})}).catch(l=>{console.log(l),c.emit("update:loading",{isLoading:!1}),c.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(l,i)=>{const e=S("FontAwesomeIcon");return d(),_("div",be,[g(e,{icon:"xmark",class:"close-button",onClick:i[0]||(i[0]=V=>f("update:route","SignIn"))}),Ue,g(M,{"onUpdate:modelValue":y,modelValue:r.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),n.email?(d(),_("p",Be," 올바른 이메일 형식을 입력해주세요. ")):C("",!0),g(X,{type:"button",text:"Send password reset email",onClick:h})])}}});const Le=a=>(U("data-v-fd193814"),a=a(),B(),a),Ee=Le(()=>s("img",{src:T,class:"bg"},null,-1)),Ze=x({__name:"SignInView",setup(a){const f=G(Z);return(r,o)=>(d(),_("main",null,[Ee,(d(),H(Q(f.value),{"onUpdate:route":o[0]||(o[0]=u=>{console.log(u),u=="SignUp"?f.value=Pe:u=="ChangePassword"?f.value=ze:f.value=Z})},null,32))]))}});const qe=z(Ze,[["__scopeId","data-v-fd193814"]]);export{qe as default};
