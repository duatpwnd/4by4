import{d as A,u as R,a as q,b as O,c as J,i as C,r as w,e as N,o as K,f as S,g as _,h as t,j as g,k as I,p as B,l as E,m as c,_ as z,B as M,n as X,s as G,q as H,t as Q}from"./index-1f8f375e.js";import{s as j}from"./services-b2714c4a.js";const T="http://222.107.124.161:64000/assets/ai-af355b3c.gif",W="http://222.107.124.161:64000/assets/4by4_logo-f31356a4.png",Y="http://222.107.124.161:64000/assets/logo-65b000a4.png",D={join:"/auth/join",login:"/auth/login",googleLogin:"/auth/oauth/google"},L=a=>(B("data-v-20c24cfa"),a=a(),E(),a),ee={class:"sign-in-form"},te=L(()=>t("legend",{class:"legend"},"PIXELL AI",-1)),se={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne={key:0,class:"guide-message"},le={class:"row"},ie={class:"row"},re={class:"row"},ue=L(()=>t("span",{class:"question-txt"},"Don’t have an account?",-1)),de=L(()=>t("div",{class:"logo-area"},[t("img",{src:W,class:"fourbyfour-logo"}),t("img",{src:Y,class:"logo"})],-1)),ce=A({__name:"SignIn",emits:["update:route"],setup(a,{emit:m}){const{cookies:r}=R(),o=q(),u=O(),n=u.params.code,p=J();C("defaultInstance");const k=C("authInstance"),v=w(""),l=w(""),d=u.query.referrer,e=N({id:!1,pw:!1}),$=C("emitter"),U=()=>{v.value.trim().length==0?e.id=!0:e.id=!1,l.value.trim().length==0?e.pw=!0:e.pw=!1,!e.id&&!e.pw&&k.get(D.login,{headers:{userId:v.value,password:l.value}}).then(y=>{r.set("token",y.headers.authorization),p.putUserInfo({token:y.headers.authorization}),d==null?o.push("/main"):o.push(`/${d}`)}).catch(y=>{$.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},x=()=>{k.patch(j.userJoin+`?mailConfirmCode=${n}`).then(y=>{$.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),o.push("/sign-in")})};return K(()=>{n.length==1&&x()}),(y,f)=>{const h=S("BaseInput"),s=S("BaseButton");return c(),_("form",ee,[t("fieldset",null,[te,t("div",se,[g(h,{type:"text","onUpdate:enterEvent":U,"onUpdate:modelValue":f[0]||(f[0]=i=>v.value=i),modelValue:v.value,placeholder:"ID"},null,8,["modelValue"]),e.id?(c(),_("p",ae,"Please enter your ID.")):I("",!0)]),t("div",oe,[g(h,{type:"password","onUpdate:enterEvent":U,"onUpdate:modelValue":f[1]||(f[1]=i=>{l.value=i}),modelValue:l.value,placeholder:"Password"},null,8,["modelValue"]),e.pw?(c(),_("p",ne," Please enter a password. ")):I("",!0)]),t("div",le,[g(s,{text:"Log In",onClick:U})]),t("div",ie,[t("button",{type:"button",class:"find-password-link",onClick:f[2]||(f[2]=i=>m("update:route","ChangePassword"))}," Forgot password? ")]),t("div",re,[ue,t("button",{type:"button",class:"sign-up-link",onClick:f[3]||(f[3]=i=>m("update:route","SignUp"))}," Sign Up ")]),de])])}}});const Z=z(ce,[["__scopeId","data-v-20c24cfa"]]),V=a=>(B("data-v-5ff2e26b"),a=a(),E(),a),me=V(()=>t("legend",{class:"legend"},"Create an Account",-1)),pe={class:"row name-area"},_e={class:"first-name-area"},ge=V(()=>t("label",null,"First Name",-1)),fe={key:0,class:"guide-message"},he={class:"last-name-area"},ve=V(()=>t("label",null,"Last Name",-1)),we={key:0,class:"guide-message"},Ie={class:"row"},ye=V(()=>t("label",null,"Email Address",-1)),Ce={key:0,class:"guide-message"},ke={class:"row"},Ve=V(()=>t("label",null,"Password",-1)),$e={key:0,class:"guide-message"},Ue={class:"row"},be=V(()=>t("label",null,"Confirm Password",-1)),Se={key:0,class:"guide-message"},Ae={class:"row"},xe=A({__name:"SignUp",emits:["update:route"],setup(a,{emit:m}){const r=w(""),o=w(""),u=w(""),n=w(""),p=w(""),k=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,v=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,l=C("authInstance"),d=C("emitter"),e=N({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),$=s=>{r.value=s,r.value.trim().length>0?e.firstName=!1:e.firstName=!0},U=s=>{o.value=s,o.value.trim().length>0?e.lastName=!1:e.lastName=!0},x=s=>{const i=v.test(s);u.value=s,i?e.email=!1:e.email=!0},y=s=>{const i=k.test(s);n.value=s,i?e.pw=!1:e.pw=!0},f=s=>{p.value=s,n.value!==p.value?e.pwConfirm=!0:e.pwConfirm=!1},h=()=>{r.value.trim().length==0&&(e.firstName=!0),o.value.trim().length==0&&(e.lastName=!0),u.value.trim().length==0&&(e.email=!0),n.value.trim().length==0&&(e.pw=!0),p.value.trim().length==0&&(e.pwConfirm=!0),Object.values(e).indexOf(!0)==-1&&(d.emit("update:loading",{isLoading:!0}),l.post(D.join,{firstName:r.value,lastName:o.value,password:n.value,email:u.value,role:"user",host:location.host}).then(s=>{console.log(s),"data"in s.data&&(d.emit("update:loading",{isLoading:!1}),d.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다.",closeFn:()=>{m("update:route","SignIn")}}))}).catch(s=>{d.emit("update:loading",{isLoading:!1}),d.emit("update:alert",{isActive:!0,message:s.response.data.message})}))};return(s,i)=>{const b=S("BaseInput"),F=S("BaseButton");return c(),_("form",{class:"sign-up-form",onKeydown:i[1]||(i[1]=P=>{P.keyCode===13&&P.preventDefault()})},[t("fieldset",null,[t("button",{class:"close-btn",onClick:i[0]||(i[0]=P=>m("update:route","SignIn"))}),me,t("div",pe,[t("div",_e,[ge,g(b,{type:"text","onUpdate:modelValue":$,"onUpdate:enterEvent":h,modelValue:r.value,placeholder:"first name"},null,8,["modelValue"]),e.firstName?(c(),_("p",fe," Please enter your first name. ")):I("",!0)]),t("div",he,[ve,g(b,{type:"text","onUpdate:modelValue":U,"onUpdate:enterEvent":h,modelValue:o.value,placeholder:"last name"},null,8,["modelValue"]),e.lastName?(c(),_("p",we," Please enter your last name. ")):I("",!0)])]),t("div",Ie,[ye,g(b,{type:"text","onUpdate:modelValue":x,"onUpdate:enterEvent":h,modelValue:u.value,placeholder:"email"},null,8,["modelValue"]),e.email?(c(),_("p",Ce," Please enter the correct email format. ")):I("",!0)]),t("div",ke,[Ve,g(b,{type:"password","onUpdate:modelValue":y,"onUpdate:enterEvent":h,modelValue:n.value,placeholder:"password"},null,8,["modelValue"]),e.pw?(c(),_("p",$e," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):I("",!0)]),t("div",Ue,[be,g(b,{type:"password","onUpdate:modelValue":f,"onUpdate:enterEvent":h,modelValue:p.value,placeholder:"Confirm Password"},null,8,["modelValue"]),e.pwConfirm?(c(),_("p",Se," Passwords do not match. ")):I("",!0)]),t("div",Ae,[g(F,{text:"Create an Account",onClick:h})])])],32)}}});const Pe=z(xe,[["__scopeId","data-v-5ff2e26b"]]),Ne={class:"change-email-wrapper"},Be=t("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),Ee={key:0,class:"guide-message"},ze=A({__name:"ChangePassword",emits:["update:route"],setup(a,{emit:m}){const r=w(""),o=C("authInstance"),u=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,n=N({email:!1}),p=C("emitter"),k=l=>{const d=u.test(l);r.value=l,d?n.email=!1:n.email=!0},v=()=>{r.value.trim().length==0&&(n.email=!0),n.email||(p.emit("update:loading",{isLoading:!0}),o.get(j.sendEmailPassword+`?email=${r.value}&host=${location.host}`).then(l=>{console.log(l),p.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),p.emit("update:loading",{isLoading:!1})}).catch(l=>{console.log(l),p.emit("update:loading",{isLoading:!1}),p.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(l,d)=>{const e=S("FontAwesomeIcon");return c(),_("div",Ne,[g(e,{icon:"xmark",class:"close-button",onClick:d[0]||(d[0]=$=>m("update:route","SignIn"))}),Be,g(M,{"onUpdate:modelValue":k,modelValue:r.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),n.email?(c(),_("p",Ee," 올바른 이메일 형식을 입력해주세요. ")):I("",!0),g(X,{type:"button",text:"Send password reset email",onClick:v})])}}});const Le=a=>(B("data-v-fd193814"),a=a(),E(),a),Ze=Le(()=>t("img",{src:T,class:"bg"},null,-1)),je=A({__name:"SignInView",setup(a){const m=G(Z);return(r,o)=>(c(),_("main",null,[Ze,(c(),H(Q(m.value),{"onUpdate:route":o[0]||(o[0]=u=>{console.log(u),u=="SignUp"?m.value=Pe:u=="ChangePassword"?m.value=ze:m.value=Z})},null,32))]))}});const Re=z(je,[["__scopeId","data-v-fd193814"]]);export{Re as default};
