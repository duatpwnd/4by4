import{d as P,u as D,a as F,b as O,c as J,i as k,r as w,e as U,o as K,f as S,g as _,h as t,j as g,k as C,p as b,l as B,m as c,_ as z,B as M,n as X,s as G,q as H,t as Q}from"./index-cfbb2c03.js";import{s as Z}from"./services-b33b6e54.js";const T="http://222.107.124.161:64000/assets/ai-af355b3c.gif",q={join:"/auth/join",login:"/auth/login",googleLogin:"/auth/oauth/google"},L=a=>(b("data-v-05178562"),a=a(),B(),a),W={class:"sign-in-form"},Y=L(()=>t("legend",{class:"legend"},"PIXELL AI",-1)),ee={class:"row"},te={key:0,class:"guide-message"},se={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne=L(()=>t("div",{class:"row"},[t("span",{class:"or"},"OR")],-1)),le={class:"row"},ie={class:"row"},re=L(()=>t("span",{class:"question-txt"},"Don’t have an account?",-1)),ue=P({__name:"SignIn",emits:["update:route"],setup(a,{emit:f}){const{cookies:u}=D(),l=F(),d=O(),i=d.params.code,m=J(),y=k("defaultInstance"),h=w(""),o=w(""),n=d.query.referrer,e=U({id:!1,pw:!1}),V=k("emitter"),$=()=>{h.value.trim().length==0?e.id=!0:e.id=!1,o.value.trim().length==0?e.pw=!0:e.pw=!1,!e.id&&!e.pw&&y.get(q.login,{headers:{userId:h.value,password:o.value},transformRequest:(v,p)=>{delete p.Authorization}}).then(v=>{u.set("token",v.headers.authorization),m.putUserInfo({token:v.headers.authorization}),n==null?l.push("/main"):l.push(`/${n}`)}).catch(v=>{V.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},N=()=>{y.patch(Z.userJoin+`?mailConfirmCode=${i}`).then(v=>{V.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),l.push("/sign-in")})};return K(()=>{i.length==1&&N()}),(v,p)=>{const x=S("BaseInput"),s=S("BaseButton");return c(),_("form",W,[t("fieldset",null,[Y,t("div",ee,[g(x,{type:"text","onUpdate:enterEvent":$,"onUpdate:modelValue":p[0]||(p[0]=r=>h.value=r),modelValue:h.value,placeholder:"ID"},null,8,["modelValue"]),e.id?(c(),_("p",te,"Please enter your ID.")):C("",!0)]),t("div",se,[g(x,{type:"password","onUpdate:enterEvent":$,"onUpdate:modelValue":p[1]||(p[1]=r=>{o.value=r}),modelValue:o.value,placeholder:"Password"},null,8,["modelValue"]),e.pw?(c(),_("p",ae," Please enter a password. ")):C("",!0)]),t("div",oe,[g(s,{text:"Log In",onClick:$})]),ne,t("div",le,[t("button",{type:"button",class:"find-password-link",onClick:p[2]||(p[2]=r=>f("update:route","ChangePassword"))}," Forgot password? ")]),t("div",ie,[re,t("button",{type:"button",class:"sign-up-link",onClick:p[3]||(p[3]=r=>f("update:route","SignUp"))}," Sign Up ")])])])}}});const R=z(ue,[["__scopeId","data-v-05178562"]]),I=a=>(b("data-v-b3179937"),a=a(),B(),a),de=I(()=>t("legend",{class:"legend"},"Create an Account",-1)),ce=I(()=>t("div",{class:"row"},[t("span",{class:"or"},"OR Create Account via Email")],-1)),me={class:"row name-area"},pe={class:"first-name-area"},_e=I(()=>t("label",null,"First Name",-1)),ge={key:0,class:"guide-message"},fe={class:"last-name-area"},he=I(()=>t("label",null,"Last Name",-1)),ve={key:0,class:"guide-message"},we={class:"row"},Ce=I(()=>t("label",null,"Email Address",-1)),Ie={key:0,class:"guide-message"},ye={class:"row"},ke=I(()=>t("label",null,"Password",-1)),Ve={key:0,class:"guide-message"},$e={class:"row"},Ae=I(()=>t("label",null,"Confirm Password",-1)),Se={key:0,class:"guide-message"},xe={class:"row"},Pe=P({__name:"SignUp",emits:["update:route"],setup(a,{emit:f}){const u=w(""),l=w(""),d=w(""),i=w(""),m=w(""),y=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,h=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,o=k("defaultInstance"),n=k("emitter"),e=U({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),V=s=>{u.value=s,u.value.trim().length>0?e.firstName=!1:e.firstName=!0},$=s=>{l.value=s,l.value.trim().length>0?e.lastName=!1:e.lastName=!0},N=s=>{const r=h.test(s);d.value=s,r?e.email=!1:e.email=!0},v=s=>{const r=y.test(s);i.value=s,r?e.pw=!1:e.pw=!0},p=s=>{m.value=s,i.value!==m.value?e.pwConfirm=!0:e.pwConfirm=!1},x=()=>{u.value.trim().length==0&&(e.firstName=!0),l.value.trim().length==0&&(e.lastName=!0),d.value.trim().length==0&&(e.email=!0),i.value.trim().length==0&&(e.pw=!0),m.value.trim().length==0&&(e.pwConfirm=!0),Object.values(e).indexOf(!0)==-1&&(n.emit("update:loading",{isLoading:!0}),o.post(q.join,{firstName:u.value,lastName:l.value,password:i.value,email:d.value,role:"user"},{transformRequest:(s,r)=>{delete r.Authorization}}).then(s=>{"data"in s.data&&(f("update:route","SignIn"),n.emit("update:loading",{isLoading:!1}),n.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다."}))}).catch(s=>{n.emit("update:loading",{isLoading:!1}),n.emit("update:alert",{isActive:!0,message:"이미 존재하는 아이디입니다."})}))};return(s,r)=>{const A=S("BaseInput"),j=S("BaseButton");return c(),_("form",{class:"sign-up-form",onKeydown:r[0]||(r[0]=E=>{E.keyCode===13&&E.preventDefault()})},[t("fieldset",null,[de,ce,t("div",me,[t("div",pe,[_e,g(A,{type:"text","onUpdate:modelValue":V,modelValue:u.value,placeholder:"first name"},null,8,["modelValue"]),e.firstName?(c(),_("p",ge," Please enter your first name. ")):C("",!0)]),t("div",fe,[he,g(A,{type:"text","onUpdate:modelValue":$,modelValue:l.value,placeholder:"last name"},null,8,["modelValue"]),e.lastName?(c(),_("p",ve," Please enter your last name. ")):C("",!0)])]),t("div",we,[Ce,g(A,{type:"text","onUpdate:modelValue":N,modelValue:d.value,placeholder:"email"},null,8,["modelValue"]),e.email?(c(),_("p",Ie," Please enter the correct email format. ")):C("",!0)]),t("div",ye,[ke,g(A,{type:"password","onUpdate:modelValue":v,modelValue:i.value,placeholder:"password"},null,8,["modelValue"]),e.pw?(c(),_("p",Ve," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):C("",!0)]),t("div",$e,[Ae,g(A,{type:"password","onUpdate:modelValue":p,modelValue:m.value,placeholder:"Confirm Password"},null,8,["modelValue"]),e.pwConfirm?(c(),_("p",Se," Passwords do not match. ")):C("",!0)]),t("div",xe,[g(j,{text:"Create an Account",onClick:x})])])],32)}}});const Ne=z(Pe,[["__scopeId","data-v-b3179937"]]),Ue={class:"change-email-wrapper"},be=t("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),Be={key:0,class:"guide-message"},ze=P({__name:"ChangePassword",emits:["update:route"],setup(a,{emit:f}){const u=w(""),l=k("defaultInstance"),d=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,i=U({email:!1}),m=k("emitter"),y=o=>{const n=d.test(o);u.value=o,n?i.email=!1:i.email=!0},h=()=>{u.value.trim().length==0&&(i.email=!0),i.email||(m.emit("update:loading",{isLoading:!0}),l.get(Z.sendEmailPassword+`?email=${u.value}`,{transformRequest:(o,n)=>{delete n.Authorization}}).then(o=>{console.log(o),m.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),m.emit("update:loading",{isLoading:!1})}).catch(o=>{console.log(o),m.emit("update:loading",{isLoading:!1}),m.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(o,n)=>{const e=S("FontAwesomeIcon");return c(),_("div",Ue,[g(e,{icon:"xmark",class:"close-button",onClick:n[0]||(n[0]=V=>f("update:route","SignIn"))}),be,g(M,{"onUpdate:modelValue":y,modelValue:u.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),i.email?(c(),_("p",Be," 올바른 이메일 형식을 입력해주세요. ")):C("",!0),g(X,{type:"button",text:"Send password reset email",onClick:h})])}}});const Le=a=>(b("data-v-fd193814"),a=a(),B(),a),Ee=Le(()=>t("img",{src:T,class:"bg"},null,-1)),Re=P({__name:"SignInView",setup(a){const f=G(R);return(u,l)=>(c(),_("main",null,[Ee,(c(),H(Q(f.value),{"onUpdate:route":l[0]||(l[0]=d=>{console.log(d),d=="SignUp"?f.value=Ne:d=="ChangePassword"?f.value=ze:f.value=R})},null,32))]))}});const je=z(Re,[["__scopeId","data-v-fd193814"]]);export{je as default};
