import{d as x,u as D,a as O,b as G,c as H,i as A,r as w,e as z,o as J,f as V,g as h,h as e,j as p,k,l as K,p as L,m as R,n as _,_ as E,B as M,q as X,s as Q,t as T,v as W}from"./index-aaf701c1.js";import{s as F}from"./services-eb80de62.js";const Y="http://222.107.124.161:64000/assets/ai-af355b3c.gif",B={join:"/api/auth/join",login:"/api/auth/login",googleLogin:"/api/auth/oauth/google"},Z=n=>(L("data-v-6cc09739"),n=n(),R(),n),ee={class:"sign-in-form"},te=Z(()=>e("legend",{class:"legend"},"PIXELL AI",-1)),se={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne={key:0,class:"guide-message"},le={class:"row"},ie=Z(()=>e("div",{class:"row"},[e("span",{class:"or"},"OR")],-1)),re={class:"row"},de={class:"row"},ue=Z(()=>e("span",{class:"question-txt"},"Don’t Have a Account?",-1)),ce=x({__name:"SignIn",emits:["update:route"],setup(n,{emit:g}){const{cookies:d}=D(),l=O(),c=G(),u=c.params.code,m=H(),C=A("defaultInstance"),v=w(""),i=w(""),o=c.query.referrer,t=z({id:!1,pw:!1}),$=A("emitter"),U=()=>{K().then(r=>{console.log(r),C.get(B.googleLogin,{headers:{token:r.token_type+" "+r.access_token},transformRequest:(a,s)=>{delete s.Authorization}}).then(a=>{console.log(a),d.set("token",a.data.data),m.putUserInfo({token:a.data.data}),l.push("/main")})}).catch(r=>{console.log(r)})},S=()=>{v.value.trim().length==0?t.id=!0:t.id=!1,i.value.trim().length==0?t.pw=!0:t.pw=!1,!t.id&&!t.pw&&C.get(B.login,{headers:{userId:v.value,password:i.value},transformRequest:(r,a)=>{delete a.Authorization}}).then(r=>{d.set("token",r.headers.authorization),m.putUserInfo({token:r.headers.authorization}),console.log("output->referrer",o),o==null?l.push("/main"):l.push(`/${o}`)}).catch(r=>{$.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},N=()=>{C.patch(F.userJoin+`?mailConfirmCode=${u}`).then(r=>{console.log(r),$.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),l.push("/sign-in")})};return J(()=>{u.length==1&&N()}),(r,a)=>{const s=V("BaseInput"),f=V("BaseButton");return _(),h("form",ee,[e("fieldset",null,[te,e("div",se,[p(s,{type:"text","onUpdate:enterEvent":S,"onUpdate:modelValue":a[0]||(a[0]=y=>v.value=y),modelValue:v.value,placeholder:"ID"},null,8,["modelValue"]),t.id?(_(),h("p",ae,"Please enter your ID.")):k("",!0)]),e("div",oe,[p(s,{type:"password","onUpdate:enterEvent":S,"onUpdate:modelValue":a[1]||(a[1]=y=>{i.value=y}),modelValue:i.value,placeholder:"Password"},null,8,["modelValue"]),t.pw?(_(),h("p",ne," Please enter a password. ")):k("",!0)]),e("div",le,[p(f,{text:"Log In",onClick:S})]),ie,e("div",{class:"row"},[e("div",{class:"google-sign-in-area"},[e("button",{type:"button",class:"google-sign-in",onClick:U}," Continue with Google ")])]),e("div",re,[e("button",{type:"button",class:"find-password-link",onClick:a[2]||(a[2]=y=>g("update:route","ChangePassword"))}," Forget password? ")]),e("div",de,[ue,e("button",{type:"button",class:"sign-up-link",onClick:a[3]||(a[3]=y=>g("update:route","SignUp"))}," Sign Up ")])])])}}});const q=E(ce,[["__scopeId","data-v-6cc09739"]]),I=n=>(L("data-v-e7ddc70b"),n=n(),R(),n),me=I(()=>e("legend",{class:"legend"},"Create an Account",-1)),pe={class:"row"},_e=I(()=>e("button",{class:"google-sign-up"},null,-1)),ge=I(()=>e("div",{class:"row"},[e("span",{class:"or"},"OR Create Account via Email")],-1)),fe={class:"row name-area"},he={class:"first-name-area"},ve=I(()=>e("label",null,"First Name",-1)),we={key:0,class:"guide-message"},ke={class:"last-name-area"},Ie=I(()=>e("label",null,"Last Name",-1)),Ce={key:0,class:"guide-message"},ye={class:"row"},Ve=I(()=>e("label",null,"Email Address",-1)),Ae={key:0,class:"guide-message"},$e={class:"row"},Se=I(()=>e("label",null,"Password",-1)),be={key:0,class:"guide-message"},xe={class:"row"},Ue=I(()=>e("label",null,"Password Confirm",-1)),Ne={key:0,class:"guide-message"},Pe={class:"row"},Be=x({__name:"SignUp",emits:["update:route"],setup(n,{emit:g}){const d=w(""),l=w(""),c=w(""),u=w(""),m=w(""),C=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,v=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,i=A("defaultInstance"),o=A("emitter"),t=z({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),$=s=>{d.value=s,d.value.trim().length>0?t.firstName=!1:t.firstName=!0},U=s=>{l.value=s,l.value.trim().length>0?t.lastName=!1:t.lastName=!0},S=s=>{const f=v.test(s);c.value=s,f?t.email=!1:t.email=!0},N=s=>{const f=C.test(s);u.value=s,f?t.pw=!1:t.pw=!0},r=s=>{m.value=s,u.value!==m.value?t.pwConfirm=!0:t.pwConfirm=!1},a=()=>{d.value.trim().length==0&&(t.firstName=!0),l.value.trim().length==0&&(t.lastName=!0),c.value.trim().length==0&&(t.email=!0),u.value.trim().length==0&&(t.pw=!0),m.value.trim().length==0&&(t.pwConfirm=!0),Object.values(t).indexOf(!0)==-1&&(o.emit("update:loading",{isLoading:!0}),i.post(B.join,{firstName:d.value,lastName:l.value,password:u.value,email:c.value,role:"user"},{transformRequest:(s,f)=>{delete f.Authorization}}).then(s=>{"data"in s.data&&(g("update:route","SignIn"),o.emit("update:loading",{isLoading:!1}),o.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다."}))}).catch(s=>{o.emit("update:loading",{isLoading:!1}),o.emit("update:alert",{isActive:!0,message:"이미 존재하는 아이디입니다."})}))};return(s,f)=>{const y=V("FontAwesomeIcon"),b=V("BaseInput"),j=V("BaseButton");return _(),h("form",{class:"sign-up-form",onKeydown:f[1]||(f[1]=P=>{P.keyCode===13&&P.preventDefault()})},[e("fieldset",null,[me,e("div",pe,[_e,p(y,{icon:"xmark",class:"close-button",onClick:f[0]||(f[0]=P=>g("update:route","SignIn"))})]),ge,e("div",fe,[e("div",he,[ve,p(b,{type:"text","onUpdate:modelValue":$,modelValue:d.value,placeholder:"first name"},null,8,["modelValue"]),t.firstName?(_(),h("p",we," Please enter your first name. ")):k("",!0)]),e("div",ke,[Ie,p(b,{type:"text","onUpdate:modelValue":U,modelValue:l.value,placeholder:"last name"},null,8,["modelValue"]),t.lastName?(_(),h("p",Ce," Please enter your last name. ")):k("",!0)])]),e("div",ye,[Ve,p(b,{type:"text","onUpdate:modelValue":S,modelValue:c.value,placeholder:"email"},null,8,["modelValue"]),t.email?(_(),h("p",Ae," Please enter the correct email format. ")):k("",!0)]),e("div",$e,[Se,p(b,{type:"password","onUpdate:modelValue":N,modelValue:u.value,placeholder:"password"},null,8,["modelValue"]),t.pw?(_(),h("p",be," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):k("",!0)]),e("div",xe,[Ue,p(b,{type:"password","onUpdate:modelValue":r,modelValue:m.value,placeholder:"password confirm"},null,8,["modelValue"]),t.pwConfirm?(_(),h("p",Ne," Passwords do not match. ")):k("",!0)]),e("div",Pe,[p(j,{text:"Create an Account",onClick:a})])])],32)}}});const ze=E(Be,[["__scopeId","data-v-e7ddc70b"]]),Le={class:"change-email-wrapper"},Re=e("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),Ee={key:0,class:"guide-message"},Ze=x({__name:"ChangePassword",emits:["update:route"],setup(n,{emit:g}){const d=w(""),l=A("defaultInstance"),c=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,u=z({email:!1}),m=A("emitter"),C=i=>{const o=c.test(i);d.value=i,o?u.email=!1:u.email=!0},v=()=>{d.value.trim().length==0&&(u.email=!0),u.email||(m.emit("update:loading",{isLoading:!0}),l.get(F.sendEmailPassword+`?email=${d.value}`,{transformRequest:(i,o)=>{delete o.Authorization}}).then(i=>{console.log(i),m.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),m.emit("update:loading",{isLoading:!1})}).catch(i=>{console.log(i),m.emit("update:loading",{isLoading:!1}),m.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(i,o)=>{const t=V("FontAwesomeIcon");return _(),h("div",Le,[p(t,{icon:"xmark",class:"close-button",onClick:o[0]||(o[0]=$=>g("update:route","SignIn"))}),Re,p(M,{"onUpdate:modelValue":C,modelValue:d.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),u.email?(_(),h("p",Ee," 올바른 이메일 형식을 입력해주세요. ")):k("",!0),p(X,{type:"button",text:"Send password reset email",onClick:v})])}}});const qe=n=>(L("data-v-fd193814"),n=n(),R(),n),Fe=qe(()=>e("img",{src:Y,class:"bg"},null,-1)),je=x({__name:"SignInView",setup(n){const g=Q(q);return(d,l)=>(_(),h("main",null,[Fe,(_(),T(W(g.value),{"onUpdate:route":l[0]||(l[0]=c=>{console.log(c),c=="SignUp"?g.value=ze:c=="ChangePassword"?g.value=Ze:g.value=q})},null,32))]))}});const Ge=E(je,[["__scopeId","data-v-fd193814"]]);export{Ge as default};
