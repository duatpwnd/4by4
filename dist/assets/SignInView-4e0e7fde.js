import{d as x,u as q,a as O,b as G,c as H,i as $,r as w,e as z,o as J,f as V,g as f,h as e,j as m,k,l as K,p as L,m as E,n as p,_ as Z,B as M,q as X,s as Q,t as T,v as W}from"./index-a55f3c4f.js";import{s as j}from"./services-eb80de62.js";const Y="http://222.107.124.161:64000/assets/ai-af355b3c.gif",B={join:"/api/auth/join",login:"/api/auth/login",googleLogin:"/api/auth/oauth/google"},R=a=>(L("data-v-e56522f1"),a=a(),E(),a),ee={class:"sign-in-form"},te=R(()=>e("legend",{class:"legend"},"PIXELL AI",-1)),se={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne={key:0,class:"guide-message"},le={class:"row"},ie=R(()=>e("div",{class:"row"},[e("span",{class:"or"},"OR")],-1)),re={class:"row"},ue={class:"row"},de=R(()=>e("span",{class:"question-txt"},"Don’t Have a Account?",-1)),ce=x({__name:"SignIn",emits:["update:route"],setup(a,{emit:_}){const{cookies:n}=q(),o=O(),d=G(),l=d.params.code,c=H(),C=$("defaultInstance"),v=w(""),i=w(""),r=d.query.referrer,t=z({id:!1,pw:!1}),A=$("emitter"),U=()=>{K().then(g=>{console.log(g),C.get(B.googleLogin,{headers:{token:g.token_type+" "+g.access_token}}).then(u=>{console.log(u),n.set("token",u.data.data),c.putUserInfo({token:u.data.data}),o.push("/main")})})},S=()=>{v.value.trim().length==0?t.id=!0:t.id=!1,i.value.trim().length==0?t.pw=!0:t.pw=!1,!t.id&&!t.pw&&C.get(B.login,{headers:{userId:v.value,password:i.value}}).then(g=>{n.set("token",g.headers.authorization),c.putUserInfo({token:g.headers.authorization}),console.log("output->referrer",r),r==null?o.push("/main"):o.push(`/${r}`)}).catch(g=>{A.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},N=()=>{C.patch(j.userJoin+`?mailConfirmCode=${l}`).then(g=>{console.log(g),A.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),o.push("/sign-in")})};return J(()=>{l.length==1&&N()}),(g,u)=>{const s=V("BaseInput"),h=V("BaseButton");return p(),f("form",ee,[e("fieldset",null,[te,e("div",se,[m(s,{type:"text","onUpdate:enterEvent":S,"onUpdate:modelValue":u[0]||(u[0]=y=>v.value=y),modelValue:v.value,placeholder:"ID"},null,8,["modelValue"]),t.id?(p(),f("p",ae,"Please enter your ID.")):k("",!0)]),e("div",oe,[m(s,{type:"password","onUpdate:enterEvent":S,"onUpdate:modelValue":u[1]||(u[1]=y=>{i.value=y}),modelValue:i.value,placeholder:"Password"},null,8,["modelValue"]),t.pw?(p(),f("p",ne," Please enter a password. ")):k("",!0)]),e("div",le,[m(h,{text:"Log In",onClick:S})]),ie,e("div",{class:"row"},[e("div",{class:"google-sign-in-area"},[e("button",{type:"button",class:"google-sign-in",onClick:U}," Continue with Google ")])]),e("div",re,[e("button",{type:"button",class:"find-password-link",onClick:u[2]||(u[2]=y=>_("update:route","ChangePassword"))}," Forget password? ")]),e("div",ue,[de,e("button",{type:"button",class:"sign-up-link",onClick:u[3]||(u[3]=y=>_("update:route","SignUp"))}," Sign Up ")])])])}}});const F=Z(ce,[["__scopeId","data-v-e56522f1"]]),I=a=>(L("data-v-948cb46f"),a=a(),E(),a),me=I(()=>e("legend",{class:"legend"},"Create an Account",-1)),pe={class:"row"},_e=I(()=>e("button",{class:"google-sign-up"},null,-1)),ge=I(()=>e("div",{class:"row"},[e("span",{class:"or"},"OR Create Acount via Email")],-1)),fe={class:"row name-area"},he={class:"first-name-area"},ve=I(()=>e("label",null,"First Name",-1)),we={key:0,class:"guide-message"},ke={class:"last-name-area"},Ie=I(()=>e("label",null,"Last Name",-1)),Ce={key:0,class:"guide-message"},ye={class:"row"},Ve=I(()=>e("label",null,"Email Address",-1)),$e={key:0,class:"guide-message"},Ae={class:"row"},Se=I(()=>e("label",null,"Password",-1)),be={key:0,class:"guide-message"},xe={class:"row"},Ue=I(()=>e("label",null,"Password Confirm",-1)),Ne={key:0,class:"guide-message"},Pe={class:"row"},Be=x({__name:"SignUp",emits:["update:route"],setup(a,{emit:_}){const n=w(""),o=w(""),d=w(""),l=w(""),c=w(""),C=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,v=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,i=$("defaultInstance"),r=$("emitter"),t=z({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),A=s=>{n.value=s,n.value.trim().length>0?t.firstName=!1:t.firstName=!0},U=s=>{o.value=s,o.value.trim().length>0?t.lastName=!1:t.lastName=!0},S=s=>{const h=v.test(s);d.value=s,h?t.email=!1:t.email=!0},N=s=>{const h=C.test(s);l.value=s,h?t.pw=!1:t.pw=!0},g=s=>{c.value=s,l.value!==c.value?t.pwConfirm=!0:t.pwConfirm=!1},u=()=>{n.value.trim().length==0&&(t.firstName=!0),o.value.trim().length==0&&(t.lastName=!0),d.value.trim().length==0&&(t.email=!0),l.value.trim().length==0&&(t.pw=!0),c.value.trim().length==0&&(t.pwConfirm=!0),Object.values(t).indexOf(!0)==-1&&(r.emit("update:loading",{isLoading:!0}),i.post(B.join,{firstName:n.value,lastName:o.value,password:l.value,email:d.value,role:"user"}).then(s=>{"data"in s.data&&(_("update:route","SignIn"),r.emit("update:loading",{isLoading:!1}),r.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다."}))}).catch(s=>{r.emit("update:loading",{isLoading:!1}),r.emit("update:alert",{isActive:!0,message:"이미 존재하는 아이디입니다."})}))};return(s,h)=>{const y=V("FontAwesomeIcon"),b=V("BaseInput"),D=V("BaseButton");return p(),f("form",{class:"sign-up-form",onKeydown:h[1]||(h[1]=P=>{P.keyCode===13&&P.preventDefault()})},[e("fieldset",null,[me,e("div",pe,[_e,m(y,{icon:"xmark",class:"close-button",onClick:h[0]||(h[0]=P=>_("update:route","SignIn"))})]),ge,e("div",fe,[e("div",he,[ve,m(b,{type:"text","onUpdate:modelValue":A,modelValue:n.value,placeholder:"first name"},null,8,["modelValue"]),t.firstName?(p(),f("p",we," Please enter your first name. ")):k("",!0)]),e("div",ke,[Ie,m(b,{type:"text","onUpdate:modelValue":U,modelValue:o.value,placeholder:"last name"},null,8,["modelValue"]),t.lastName?(p(),f("p",Ce," Please enter your last name. ")):k("",!0)])]),e("div",ye,[Ve,m(b,{type:"text","onUpdate:modelValue":S,modelValue:d.value,placeholder:"email"},null,8,["modelValue"]),t.email?(p(),f("p",$e," Please enter the correct email format. ")):k("",!0)]),e("div",Ae,[Se,m(b,{type:"password","onUpdate:modelValue":N,modelValue:l.value,placeholder:"password"},null,8,["modelValue"]),t.pw?(p(),f("p",be," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):k("",!0)]),e("div",xe,[Ue,m(b,{type:"password","onUpdate:modelValue":g,modelValue:c.value,placeholder:"password confirm"},null,8,["modelValue"]),t.pwConfirm?(p(),f("p",Ne," Passwords do not match. ")):k("",!0)]),e("div",Pe,[m(D,{text:"Create an Account",onClick:u})])])],32)}}});const ze=Z(Be,[["__scopeId","data-v-948cb46f"]]),Le={class:"change-email-wrapper"},Ee=e("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),Ze={key:0,class:"guide-message"},Re=x({__name:"ChangePassword",emits:["update:route"],setup(a,{emit:_}){const n=w(""),o=$("defaultInstance"),d=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,l=z({email:!1}),c=$("emitter"),C=i=>{const r=d.test(i);n.value=i,r?l.email=!1:l.email=!0},v=()=>{n.value.trim().length==0&&(l.email=!0),l.email||(c.emit("update:loading",{isLoading:!0}),o.get(j.sendEmailPassword+`?email=${n.value}`).then(i=>{console.log(i),c.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),c.emit("update:loading",{isLoading:!1})}).catch(i=>{console.log(i),c.emit("update:loading",{isLoading:!1}),c.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(i,r)=>{const t=V("FontAwesomeIcon");return p(),f("div",Le,[m(t,{icon:"xmark",class:"close-button",onClick:r[0]||(r[0]=A=>_("update:route","SignIn"))}),Ee,m(M,{"onUpdate:modelValue":C,modelValue:n.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),l.email?(p(),f("p",Ze," 올바른 이메일 형식을 입력해주세요. ")):k("",!0),m(X,{type:"button",text:"Send password reset email",onClick:v})])}}});const Fe=a=>(L("data-v-fd193814"),a=a(),E(),a),je=Fe(()=>e("img",{src:Y,class:"bg"},null,-1)),De=x({__name:"SignInView",setup(a){const _=Q(F);return(n,o)=>(p(),f("main",null,[je,(p(),T(W(_.value),{"onUpdate:route":o[0]||(o[0]=d=>{console.log(d),d=="SignUp"?_.value=ze:d=="ChangePassword"?_.value=Re:_.value=F})},null,32))]))}});const Ge=Z(De,[["__scopeId","data-v-fd193814"]]);export{Ge as default};
