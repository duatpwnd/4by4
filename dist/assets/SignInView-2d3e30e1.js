import{d as x,u as D,a as F,b as O,c as J,i as k,r as y,e as N,o as K,f as S,g as _,h as t,j as g,k as I,p as b,l as B,m as c,_ as z,B as M,n as X,s as G,q as H,t as Q}from"./index-954687ff.js";import{s as R}from"./services-73bde18f.js";const T="http://222.107.124.161:64000/assets/ai-af355b3c.gif",W="http://222.107.124.161:64000/assets/4by4_logo-f31356a4.png",Y="http://222.107.124.161:64000/assets/logo-65b000a4.png",q={join:"/auth/join",login:"/auth/login",googleLogin:"/auth/oauth/google"},E=a=>(b("data-v-e5157684"),a=a(),B(),a),ee={class:"sign-in-form"},te=E(()=>t("legend",{class:"legend"},"PIXELL AI",-1)),se={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne={key:0,class:"guide-message"},le={class:"row"},ie={class:"row"},re={class:"row"},ue=E(()=>t("span",{class:"question-txt"},"Don’t have an account?",-1)),de=E(()=>t("div",{class:"logo-area"},[t("img",{src:W,class:"fourbyfour-logo"}),t("img",{src:Y,class:"logo"})],-1)),ce=x({__name:"SignIn",emits:["update:route"],setup(a,{emit:f}){const{cookies:u}=D(),l=F(),d=O(),i=d.params.code,m=J(),C=k("defaultInstance"),v=y(""),o=y(""),n=d.query.referrer,e=N({id:!1,pw:!1}),$=k("emitter"),A=()=>{v.value.trim().length==0?e.id=!0:e.id=!1,o.value.trim().length==0?e.pw=!0:e.pw=!1,!e.id&&!e.pw&&C.get(q.login,{headers:{userId:v.value,password:o.value},transformRequest:(w,p)=>{delete p.Authorization}}).then(w=>{u.set("token",w.headers.authorization),m.putUserInfo({token:w.headers.authorization}),n==null?l.push("/main"):l.push(`/${n}`)}).catch(w=>{$.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},P=()=>{C.patch(R.userJoin+`?mailConfirmCode=${i}`).then(w=>{$.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),l.push("/sign-in")})};return K(()=>{i.length==1&&P()}),(w,p)=>{const h=S("BaseInput"),s=S("BaseButton");return c(),_("form",ee,[t("fieldset",null,[te,t("div",se,[g(h,{type:"text","onUpdate:enterEvent":A,"onUpdate:modelValue":p[0]||(p[0]=r=>v.value=r),modelValue:v.value,placeholder:"ID"},null,8,["modelValue"]),e.id?(c(),_("p",ae,"Please enter your ID.")):I("",!0)]),t("div",oe,[g(h,{type:"password","onUpdate:enterEvent":A,"onUpdate:modelValue":p[1]||(p[1]=r=>{o.value=r}),modelValue:o.value,placeholder:"Password"},null,8,["modelValue"]),e.pw?(c(),_("p",ne," Please enter a password. ")):I("",!0)]),t("div",le,[g(s,{text:"Log In",onClick:A})]),t("div",ie,[t("button",{type:"button",class:"find-password-link",onClick:p[2]||(p[2]=r=>f("update:route","ChangePassword"))}," Forgot password? ")]),t("div",re,[ue,t("button",{type:"button",class:"sign-up-link",onClick:p[3]||(p[3]=r=>f("update:route","SignUp"))}," Sign Up ")]),de])])}}});const Z=z(ce,[["__scopeId","data-v-e5157684"]]),V=a=>(b("data-v-a72d2423"),a=a(),B(),a),me=V(()=>t("legend",{class:"legend"},"Create an Account",-1)),pe={class:"row name-area"},_e={class:"first-name-area"},ge=V(()=>t("label",null,"First Name",-1)),fe={key:0,class:"guide-message"},he={class:"last-name-area"},ve=V(()=>t("label",null,"Last Name",-1)),we={key:0,class:"guide-message"},ye={class:"row"},Ie=V(()=>t("label",null,"Email Address",-1)),Ce={key:0,class:"guide-message"},ke={class:"row"},Ve=V(()=>t("label",null,"Password",-1)),$e={key:0,class:"guide-message"},Ae={class:"row"},Ue=V(()=>t("label",null,"Confirm Password",-1)),Se={key:0,class:"guide-message"},xe={class:"row"},Pe=x({__name:"SignUp",emits:["update:route"],setup(a,{emit:f}){const u=y(""),l=y(""),d=y(""),i=y(""),m=y(""),C=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,v=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,o=k("defaultInstance"),n=k("emitter"),e=N({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),$=s=>{u.value=s,u.value.trim().length>0?e.firstName=!1:e.firstName=!0},A=s=>{l.value=s,l.value.trim().length>0?e.lastName=!1:e.lastName=!0},P=s=>{const r=v.test(s);d.value=s,r?e.email=!1:e.email=!0},w=s=>{const r=C.test(s);i.value=s,r?e.pw=!1:e.pw=!0},p=s=>{m.value=s,i.value!==m.value?e.pwConfirm=!0:e.pwConfirm=!1},h=()=>{u.value.trim().length==0&&(e.firstName=!0),l.value.trim().length==0&&(e.lastName=!0),d.value.trim().length==0&&(e.email=!0),i.value.trim().length==0&&(e.pw=!0),m.value.trim().length==0&&(e.pwConfirm=!0),Object.values(e).indexOf(!0)==-1&&(n.emit("update:loading",{isLoading:!0}),o.post(q.join,{transformRequest:(s,r)=>(delete r.Authorization,{firstName:u.value,lastName:l.value,password:i.value,email:d.value,role:"user",host:location.host})}).then(s=>{"data"in s.data&&(n.emit("update:loading",{isLoading:!1}),n.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다.",closeFn:()=>{f("update:route","SignIn")}}))}).catch(s=>{n.emit("update:loading",{isLoading:!1}),n.emit("update:alert",{isActive:!0,message:"이미 존재하는 이메일입니다."})}))};return(s,r)=>{const U=S("BaseInput"),j=S("BaseButton");return c(),_("form",{class:"sign-up-form",onKeydown:r[0]||(r[0]=L=>{L.keyCode===13&&L.preventDefault()})},[t("fieldset",null,[me,t("div",pe,[t("div",_e,[ge,g(U,{type:"text","onUpdate:modelValue":$,"onUpdate:enterEvent":h,modelValue:u.value,placeholder:"first name"},null,8,["modelValue"]),e.firstName?(c(),_("p",fe," Please enter your first name. ")):I("",!0)]),t("div",he,[ve,g(U,{type:"text","onUpdate:modelValue":A,"onUpdate:enterEvent":h,modelValue:l.value,placeholder:"last name"},null,8,["modelValue"]),e.lastName?(c(),_("p",we," Please enter your last name. ")):I("",!0)])]),t("div",ye,[Ie,g(U,{type:"text","onUpdate:modelValue":P,"onUpdate:enterEvent":h,modelValue:d.value,placeholder:"email"},null,8,["modelValue"]),e.email?(c(),_("p",Ce," Please enter the correct email format. ")):I("",!0)]),t("div",ke,[Ve,g(U,{type:"password","onUpdate:modelValue":w,"onUpdate:enterEvent":h,modelValue:i.value,placeholder:"password"},null,8,["modelValue"]),e.pw?(c(),_("p",$e," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):I("",!0)]),t("div",Ae,[Ue,g(U,{type:"password","onUpdate:modelValue":p,"onUpdate:enterEvent":h,modelValue:m.value,placeholder:"Confirm Password"},null,8,["modelValue"]),e.pwConfirm?(c(),_("p",Se," Passwords do not match. ")):I("",!0)]),t("div",xe,[g(j,{text:"Create an Account",onClick:h})])])],32)}}});const Ne=z(Pe,[["__scopeId","data-v-a72d2423"]]),be={class:"change-email-wrapper"},Be=t("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),ze={key:0,class:"guide-message"},Ee=x({__name:"ChangePassword",emits:["update:route"],setup(a,{emit:f}){const u=y(""),l=k("defaultInstance"),d=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,i=N({email:!1}),m=k("emitter"),C=o=>{const n=d.test(o);u.value=o,n?i.email=!1:i.email=!0},v=()=>{u.value.trim().length==0&&(i.email=!0),i.email||(m.emit("update:loading",{isLoading:!0}),l.get(R.sendEmailPassword+`?email=${u.value}&host=${location.host}`,{transformRequest:(o,n)=>{delete n.Authorization}}).then(o=>{console.log(o),m.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),m.emit("update:loading",{isLoading:!1})}).catch(o=>{console.log(o),m.emit("update:loading",{isLoading:!1}),m.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(o,n)=>{const e=S("FontAwesomeIcon");return c(),_("div",be,[g(e,{icon:"xmark",class:"close-button",onClick:n[0]||(n[0]=$=>f("update:route","SignIn"))}),Be,g(M,{"onUpdate:modelValue":C,modelValue:u.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),i.email?(c(),_("p",ze," 올바른 이메일 형식을 입력해주세요. ")):I("",!0),g(X,{type:"button",text:"Send password reset email",onClick:v})])}}});const Le=a=>(b("data-v-fd193814"),a=a(),B(),a),Ze=Le(()=>t("img",{src:T,class:"bg"},null,-1)),Re=x({__name:"SignInView",setup(a){const f=G(Z);return(u,l)=>(c(),_("main",null,[Ze,(c(),H(Q(f.value),{"onUpdate:route":l[0]||(l[0]=d=>{console.log(d),d=="SignUp"?f.value=Ne:d=="ChangePassword"?f.value=Ee:f.value=Z})},null,32))]))}});const De=z(Re,[["__scopeId","data-v-fd193814"]]);export{De as default};
