import{d as b,u as D,a as F,b as O,c as J,i as k,r as y,e as P,o as K,f as U,g,h as t,j as f,k as I,p as B,l as z,m as c,_ as E,B as M,n as X,s as G,q as H,t as Q}from"./index-d3dd2984.js";import{s as R}from"./services-73bde18f.js";const T="http://222.107.124.161:64000/assets/ai-af355b3c.gif",W="http://222.107.124.161:64000/assets/4by4_logo-f31356a4.png",Y="http://222.107.124.161:64000/assets/logo-65b000a4.png",q={join:"/auth/join",login:"/auth/login",googleLogin:"/auth/oauth/google"},L=o=>(B("data-v-e5157684"),o=o(),z(),o),ee={class:"sign-in-form"},te=L(()=>t("legend",{class:"legend"},"PIXELL AI",-1)),se={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne={key:0,class:"guide-message"},le={class:"row"},ie={class:"row"},re={class:"row"},ue=L(()=>t("span",{class:"question-txt"},"Don’t have an account?",-1)),de=L(()=>t("div",{class:"logo-area"},[t("img",{src:W,class:"fourbyfour-logo"}),t("img",{src:Y,class:"logo"})],-1)),ce=b({__name:"SignIn",emits:["update:route"],setup(o,{emit:m}){const{cookies:u}=D(),i=F(),d=O(),r=d.params.code,p=J(),C=k("defaultInstance"),v=y(""),n=y(""),l=d.query.referrer,e=P({id:!1,pw:!1}),$=k("emitter"),A=()=>{v.value.trim().length==0?e.id=!0:e.id=!1,n.value.trim().length==0?e.pw=!0:e.pw=!1,!e.id&&!e.pw&&C.get(q.login,{headers:{userId:v.value,password:n.value},transformRequest:(w,_)=>{delete _.Authorization}}).then(w=>{u.set("token",w.headers.authorization),p.putUserInfo({token:w.headers.authorization}),l==null?i.push("/main"):i.push(`/${l}`)}).catch(w=>{$.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},x=()=>{C.patch(R.userJoin+`?mailConfirmCode=${r}`).then(w=>{$.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),i.push("/sign-in")})};return K(()=>{r.length==1&&x()}),(w,_)=>{const h=U("BaseInput"),s=U("BaseButton");return c(),g("form",ee,[t("fieldset",null,[te,t("div",se,[f(h,{type:"text","onUpdate:enterEvent":A,"onUpdate:modelValue":_[0]||(_[0]=a=>v.value=a),modelValue:v.value,placeholder:"ID"},null,8,["modelValue"]),e.id?(c(),g("p",ae,"Please enter your ID.")):I("",!0)]),t("div",oe,[f(h,{type:"password","onUpdate:enterEvent":A,"onUpdate:modelValue":_[1]||(_[1]=a=>{n.value=a}),modelValue:n.value,placeholder:"Password"},null,8,["modelValue"]),e.pw?(c(),g("p",ne," Please enter a password. ")):I("",!0)]),t("div",le,[f(s,{text:"Log In",onClick:A})]),t("div",ie,[t("button",{type:"button",class:"find-password-link",onClick:_[2]||(_[2]=a=>m("update:route","ChangePassword"))}," Forgot password? ")]),t("div",re,[ue,t("button",{type:"button",class:"sign-up-link",onClick:_[3]||(_[3]=a=>m("update:route","SignUp"))}," Sign Up ")]),de])])}}});const Z=E(ce,[["__scopeId","data-v-e5157684"]]),V=o=>(B("data-v-62d92ce0"),o=o(),z(),o),me=V(()=>t("legend",{class:"legend"},"Create an Account",-1)),pe={class:"row name-area"},_e={class:"first-name-area"},ge=V(()=>t("label",null,"First Name",-1)),fe={key:0,class:"guide-message"},he={class:"last-name-area"},ve=V(()=>t("label",null,"Last Name",-1)),we={key:0,class:"guide-message"},ye={class:"row"},Ie=V(()=>t("label",null,"Email Address",-1)),Ce={key:0,class:"guide-message"},ke={class:"row"},Ve=V(()=>t("label",null,"Password",-1)),$e={key:0,class:"guide-message"},Ae={class:"row"},Se=V(()=>t("label",null,"Confirm Password",-1)),Ue={key:0,class:"guide-message"},be={class:"row"},xe=b({__name:"SignUp",emits:["update:route"],setup(o,{emit:m}){const u=y(""),i=y(""),d=y(""),r=y(""),p=y(""),C=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,v=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,n=k("defaultInstance"),l=k("emitter"),e=P({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),$=s=>{u.value=s,u.value.trim().length>0?e.firstName=!1:e.firstName=!0},A=s=>{i.value=s,i.value.trim().length>0?e.lastName=!1:e.lastName=!0},x=s=>{const a=v.test(s);d.value=s,a?e.email=!1:e.email=!0},w=s=>{const a=C.test(s);r.value=s,a?e.pw=!1:e.pw=!0},_=s=>{p.value=s,r.value!==p.value?e.pwConfirm=!0:e.pwConfirm=!1},h=()=>{u.value.trim().length==0&&(e.firstName=!0),i.value.trim().length==0&&(e.lastName=!0),d.value.trim().length==0&&(e.email=!0),r.value.trim().length==0&&(e.pw=!0),p.value.trim().length==0&&(e.pwConfirm=!0),Object.values(e).indexOf(!0)==-1&&(l.emit("update:loading",{isLoading:!0}),n.post(q.join,{firstName:u.value,lastName:i.value,password:r.value,email:d.value,role:"user",host:location.host},{transformRequest:(s,a)=>(delete a.Authorization,JSON.stringify(s))}).then(s=>{console.log(s),"data"in s.data&&(l.emit("update:loading",{isLoading:!1}),l.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다.",closeFn:()=>{m("update:route","SignIn")}}))}).catch(s=>{l.emit("update:loading",{isLoading:!1}),l.emit("update:alert",{isActive:!0,message:s.response.data.message})}))};return(s,a)=>{const S=U("BaseInput"),j=U("BaseButton");return c(),g("form",{class:"sign-up-form",onKeydown:a[1]||(a[1]=N=>{N.keyCode===13&&N.preventDefault()})},[t("fieldset",null,[t("button",{class:"close-btn",onClick:a[0]||(a[0]=N=>m("update:route","SignIn"))}),me,t("div",pe,[t("div",_e,[ge,f(S,{type:"text","onUpdate:modelValue":$,"onUpdate:enterEvent":h,modelValue:u.value,placeholder:"first name"},null,8,["modelValue"]),e.firstName?(c(),g("p",fe," Please enter your first name. ")):I("",!0)]),t("div",he,[ve,f(S,{type:"text","onUpdate:modelValue":A,"onUpdate:enterEvent":h,modelValue:i.value,placeholder:"last name"},null,8,["modelValue"]),e.lastName?(c(),g("p",we," Please enter your last name. ")):I("",!0)])]),t("div",ye,[Ie,f(S,{type:"text","onUpdate:modelValue":x,"onUpdate:enterEvent":h,modelValue:d.value,placeholder:"email"},null,8,["modelValue"]),e.email?(c(),g("p",Ce," Please enter the correct email format. ")):I("",!0)]),t("div",ke,[Ve,f(S,{type:"password","onUpdate:modelValue":w,"onUpdate:enterEvent":h,modelValue:r.value,placeholder:"password"},null,8,["modelValue"]),e.pw?(c(),g("p",$e," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):I("",!0)]),t("div",Ae,[Se,f(S,{type:"password","onUpdate:modelValue":_,"onUpdate:enterEvent":h,modelValue:p.value,placeholder:"Confirm Password"},null,8,["modelValue"]),e.pwConfirm?(c(),g("p",Ue," Passwords do not match. ")):I("",!0)]),t("div",be,[f(j,{text:"Create an Account",onClick:h})])])],32)}}});const Ne=E(xe,[["__scopeId","data-v-62d92ce0"]]),Pe={class:"change-email-wrapper"},Be=t("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),ze={key:0,class:"guide-message"},Ee=b({__name:"ChangePassword",emits:["update:route"],setup(o,{emit:m}){const u=y(""),i=k("defaultInstance"),d=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,r=P({email:!1}),p=k("emitter"),C=n=>{const l=d.test(n);u.value=n,l?r.email=!1:r.email=!0},v=()=>{u.value.trim().length==0&&(r.email=!0),r.email||(p.emit("update:loading",{isLoading:!0}),i.get(R.sendEmailPassword+`?email=${u.value}&host=${location.host}`,{transformRequest:(n,l)=>{delete l.Authorization}}).then(n=>{console.log(n),p.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),p.emit("update:loading",{isLoading:!1})}).catch(n=>{console.log(n),p.emit("update:loading",{isLoading:!1}),p.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(n,l)=>{const e=U("FontAwesomeIcon");return c(),g("div",Pe,[f(e,{icon:"xmark",class:"close-button",onClick:l[0]||(l[0]=$=>m("update:route","SignIn"))}),Be,f(M,{"onUpdate:modelValue":C,modelValue:u.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),r.email?(c(),g("p",ze," 올바른 이메일 형식을 입력해주세요. ")):I("",!0),f(X,{type:"button",text:"Send password reset email",onClick:v})])}}});const Le=o=>(B("data-v-fd193814"),o=o(),z(),o),Ze=Le(()=>t("img",{src:T,class:"bg"},null,-1)),Re=b({__name:"SignInView",setup(o){const m=G(Z);return(u,i)=>(c(),g("main",null,[Ze,(c(),H(Q(m.value),{"onUpdate:route":i[0]||(i[0]=d=>{console.log(d),d=="SignUp"?m.value=Ne:d=="ChangePassword"?m.value=Ee:m.value=Z})},null,32))]))}});const De=E(Re,[["__scopeId","data-v-fd193814"]]);export{De as default};
