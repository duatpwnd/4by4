import{d as x,u as D,a as F,b as O,c as J,i as k,r as w,e as N,o as K,f as S,g as _,h as t,j as f,k as C,p as U,l as B,m as d,_ as z,B as M,n as X,s as G,q as H,t as Q}from"./index-732fa05e.js";import{s as R}from"./services-73bde18f.js";const T="http://222.107.124.161:64000/assets/ai-af355b3c.gif",j={join:"/auth/join",login:"/auth/login",googleLogin:"/auth/oauth/google"},L=a=>(U("data-v-05178562"),a=a(),B(),a),W={class:"sign-in-form"},Y=L(()=>t("legend",{class:"legend"},"PIXELL AI",-1)),ee={class:"row"},te={key:0,class:"guide-message"},se={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne=L(()=>t("div",{class:"row"},[t("span",{class:"or"},"OR")],-1)),le={class:"row"},ie={class:"row"},re=L(()=>t("span",{class:"question-txt"},"Don’t have an account?",-1)),ue=x({__name:"SignIn",emits:["update:route"],setup(a,{emit:g}){const{cookies:r}=D(),l=F(),u=O(),i=u.params.code,c=J(),y=k("defaultInstance"),h=w(""),o=w(""),n=u.query.referrer,e=N({id:!1,pw:!1}),V=k("emitter"),$=()=>{h.value.trim().length==0?e.id=!0:e.id=!1,o.value.trim().length==0?e.pw=!0:e.pw=!1,!e.id&&!e.pw&&y.get(j.login,{headers:{userId:h.value,password:o.value},transformRequest:(v,m)=>{delete m.Authorization}}).then(v=>{r.set("token",v.headers.authorization),c.putUserInfo({token:v.headers.authorization}),n==null?l.push("/main"):l.push(`/${n}`)}).catch(v=>{V.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},P=()=>{y.patch(R.userJoin+`?mailConfirmCode=${i}`).then(v=>{V.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),l.push("/sign-in")})};return K(()=>{i.length==1&&P()}),(v,m)=>{const b=S("BaseInput"),s=S("BaseButton");return d(),_("form",W,[t("fieldset",null,[Y,t("div",ee,[f(b,{type:"text","onUpdate:enterEvent":$,"onUpdate:modelValue":m[0]||(m[0]=p=>h.value=p),modelValue:h.value,placeholder:"ID"},null,8,["modelValue"]),e.id?(d(),_("p",te,"Please enter your ID.")):C("",!0)]),t("div",se,[f(b,{type:"password","onUpdate:enterEvent":$,"onUpdate:modelValue":m[1]||(m[1]=p=>{o.value=p}),modelValue:o.value,placeholder:"Password"},null,8,["modelValue"]),e.pw?(d(),_("p",ae," Please enter a password. ")):C("",!0)]),t("div",oe,[f(s,{text:"Log In",onClick:$})]),ne,t("div",le,[t("button",{type:"button",class:"find-password-link",onClick:m[2]||(m[2]=p=>g("update:route","ChangePassword"))}," Forgot password? ")]),t("div",ie,[re,t("button",{type:"button",class:"sign-up-link",onClick:m[3]||(m[3]=p=>g("update:route","SignUp"))}," Sign Up ")])])])}}});const Z=z(ue,[["__scopeId","data-v-05178562"]]),I=a=>(U("data-v-9bf60b96"),a=a(),B(),a),de=I(()=>t("legend",{class:"legend"},"Create an Account",-1)),ce=I(()=>t("div",{class:"row"},[t("span",{class:"or"},"OR Create Account via Email")],-1)),me={class:"row name-area"},pe={class:"first-name-area"},_e=I(()=>t("label",null,"First Name",-1)),fe={key:0,class:"guide-message"},ge={class:"last-name-area"},he=I(()=>t("label",null,"Last Name",-1)),ve={key:0,class:"guide-message"},we={class:"row"},Ce=I(()=>t("label",null,"Email Address",-1)),Ie={key:0,class:"guide-message"},ye={class:"row"},ke=I(()=>t("label",null,"Password",-1)),Ve={key:0,class:"guide-message"},$e={class:"row"},Ae=I(()=>t("label",null,"Confirm Password",-1)),Se={key:0,class:"guide-message"},be={class:"row"},xe=x({__name:"SignUp",emits:["update:route"],setup(a,{emit:g}){const r=w(""),l=w(""),u=w(""),i=w(""),c=w(""),y=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,h=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,o=k("defaultInstance"),n=k("emitter"),e=N({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),V=s=>{r.value=s,r.value.trim().length>0?e.firstName=!1:e.firstName=!0},$=s=>{l.value=s,l.value.trim().length>0?e.lastName=!1:e.lastName=!0},P=s=>{const p=h.test(s);u.value=s,p?e.email=!1:e.email=!0},v=s=>{const p=y.test(s);i.value=s,p?e.pw=!1:e.pw=!0},m=s=>{c.value=s,i.value!==c.value?e.pwConfirm=!0:e.pwConfirm=!1},b=()=>{r.value.trim().length==0&&(e.firstName=!0),l.value.trim().length==0&&(e.lastName=!0),u.value.trim().length==0&&(e.email=!0),i.value.trim().length==0&&(e.pw=!0),c.value.trim().length==0&&(e.pwConfirm=!0),Object.values(e).indexOf(!0)==-1&&(n.emit("update:loading",{isLoading:!0}),o.post(j.join,{firstName:r.value,lastName:l.value,password:i.value,email:u.value,role:"user"}).then(s=>{"data"in s.data&&(g("update:route","SignIn"),n.emit("update:loading",{isLoading:!1}),n.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다."}))}).catch(s=>{n.emit("update:loading",{isLoading:!1}),n.emit("update:alert",{isActive:!0,message:"이미 존재하는 이메일입니다."})}))};return(s,p)=>{const A=S("BaseInput"),q=S("BaseButton");return d(),_("form",{class:"sign-up-form",onKeydown:p[0]||(p[0]=E=>{E.keyCode===13&&E.preventDefault()})},[t("fieldset",null,[de,ce,t("div",me,[t("div",pe,[_e,f(A,{type:"text","onUpdate:modelValue":V,modelValue:r.value,placeholder:"first name"},null,8,["modelValue"]),e.firstName?(d(),_("p",fe," Please enter your first name. ")):C("",!0)]),t("div",ge,[he,f(A,{type:"text","onUpdate:modelValue":$,modelValue:l.value,placeholder:"last name"},null,8,["modelValue"]),e.lastName?(d(),_("p",ve," Please enter your last name. ")):C("",!0)])]),t("div",we,[Ce,f(A,{type:"text","onUpdate:modelValue":P,modelValue:u.value,placeholder:"email"},null,8,["modelValue"]),e.email?(d(),_("p",Ie," Please enter the correct email format. ")):C("",!0)]),t("div",ye,[ke,f(A,{type:"password","onUpdate:modelValue":v,modelValue:i.value,placeholder:"password"},null,8,["modelValue"]),e.pw?(d(),_("p",Ve," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):C("",!0)]),t("div",$e,[Ae,f(A,{type:"password","onUpdate:modelValue":m,modelValue:c.value,placeholder:"Confirm Password"},null,8,["modelValue"]),e.pwConfirm?(d(),_("p",Se," Passwords do not match. ")):C("",!0)]),t("div",be,[f(q,{text:"Create an Account",onClick:b})])])],32)}}});const Pe=z(xe,[["__scopeId","data-v-9bf60b96"]]),Ne={class:"change-email-wrapper"},Ue=t("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),Be={key:0,class:"guide-message"},ze=x({__name:"ChangePassword",emits:["update:route"],setup(a,{emit:g}){const r=w(""),l=k("defaultInstance"),u=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,i=N({email:!1}),c=k("emitter"),y=o=>{const n=u.test(o);r.value=o,n?i.email=!1:i.email=!0},h=()=>{r.value.trim().length==0&&(i.email=!0),i.email||(c.emit("update:loading",{isLoading:!0}),l.get(R.sendEmailPassword+`?email=${r.value}`,{transformRequest:(o,n)=>{delete n.Authorization}}).then(o=>{console.log(o),c.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),c.emit("update:loading",{isLoading:!1})}).catch(o=>{console.log(o),c.emit("update:loading",{isLoading:!1}),c.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(o,n)=>{const e=S("FontAwesomeIcon");return d(),_("div",Ne,[f(e,{icon:"xmark",class:"close-button",onClick:n[0]||(n[0]=V=>g("update:route","SignIn"))}),Ue,f(M,{"onUpdate:modelValue":y,modelValue:r.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),i.email?(d(),_("p",Be," 올바른 이메일 형식을 입력해주세요. ")):C("",!0),f(X,{type:"button",text:"Send password reset email",onClick:h})])}}});const Le=a=>(U("data-v-fd193814"),a=a(),B(),a),Ee=Le(()=>t("img",{src:T,class:"bg"},null,-1)),Ze=x({__name:"SignInView",setup(a){const g=G(Z);return(r,l)=>(d(),_("main",null,[Ee,(d(),H(Q(g.value),{"onUpdate:route":l[0]||(l[0]=u=>{console.log(u),u=="SignUp"?g.value=Pe:u=="ChangePassword"?g.value=ze:g.value=Z})},null,32))]))}});const qe=z(Ze,[["__scopeId","data-v-fd193814"]]);export{qe as default};
