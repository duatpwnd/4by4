import{d as x,u as D,a as O,b as G,c as J,i as A,r as w,e as z,o as K,f as V,g as h,h as e,j as p,k,l as M,p as L,m as R,n as _,_ as E,B as X,q as H,s as Q,t as T,v as W}from"./index-54a60391.js";import{s as F}from"./services-b33b6e54.js";const Y="http://222.107.124.161:64000/assets/ai-af355b3c.gif",B={join:"/auth/join",login:"/auth/login",googleLogin:"/auth/oauth/google"},Z=o=>(L("data-v-ddb9d8f0"),o=o(),R(),o),ee={class:"sign-in-form"},te=Z(()=>e("legend",{class:"legend"},"PIXELL AI",-1)),se={class:"row"},ae={key:0,class:"guide-message"},oe={class:"row"},ne={key:0,class:"guide-message"},le={class:"row"},ie=Z(()=>e("div",{class:"row"},[e("span",{class:"or"},"OR")],-1)),de={class:"row"},re={class:"row"},ue=Z(()=>e("span",{class:"question-txt"},"Don’t have an account?",-1)),ce=x({__name:"SignIn",emits:["update:route"],setup(o,{emit:g}){const{cookies:d}=D(),n=O(),u=G(),r=u.params.code,c=J(),C=A("defaultInstance"),v=w(""),l=w(""),i=u.query.referrer,t=z({id:!1,pw:!1}),$=A("emitter"),P=()=>{M().then(m=>{C.get(B.googleLogin,{headers:{token:m.token_type+" "+m.access_token},transformRequest:(a,s)=>{delete s.Authorization}}).then(a=>{d.set("token",a.data.data),c.putUserInfo({token:a.data.data}),n.push("/main")})}).catch(m=>{console.log(m)})},b=()=>{v.value.trim().length==0?t.id=!0:t.id=!1,l.value.trim().length==0?t.pw=!0:t.pw=!1,!t.id&&!t.pw&&C.get(B.login,{headers:{userId:v.value,password:l.value},transformRequest:(m,a)=>{delete a.Authorization}}).then(m=>{d.set("token",m.headers.authorization),c.putUserInfo({token:m.headers.authorization}),i==null?n.push("/main"):n.push(`/${i}`)}).catch(m=>{$.emit("update:alert",{isActive:!0,message:"Please enter your ID or password correctly."})})},U=()=>{C.patch(F.userJoin+`?mailConfirmCode=${r}`).then(m=>{$.emit("update:alert",{isActive:!0,message:"Sign up is complete."}),n.push("/sign-in")})};return K(()=>{r.length==1&&U()}),(m,a)=>{const s=V("BaseInput"),f=V("BaseButton");return _(),h("form",ee,[e("fieldset",null,[te,e("div",se,[p(s,{type:"text","onUpdate:enterEvent":b,"onUpdate:modelValue":a[0]||(a[0]=y=>v.value=y),modelValue:v.value,placeholder:"ID"},null,8,["modelValue"]),t.id?(_(),h("p",ae,"Please enter your ID.")):k("",!0)]),e("div",oe,[p(s,{type:"password","onUpdate:enterEvent":b,"onUpdate:modelValue":a[1]||(a[1]=y=>{l.value=y}),modelValue:l.value,placeholder:"Password"},null,8,["modelValue"]),t.pw?(_(),h("p",ne," Please enter a password. ")):k("",!0)]),e("div",le,[p(f,{text:"Log In",onClick:b})]),ie,e("div",{class:"row"},[e("div",{class:"google-sign-in-area"},[e("button",{type:"button",class:"google-sign-in",onClick:P}," Continue with Google ")])]),e("div",de,[e("button",{type:"button",class:"find-password-link",onClick:a[2]||(a[2]=y=>g("update:route","ChangePassword"))}," Forgot password? ")]),e("div",re,[ue,e("button",{type:"button",class:"sign-up-link",onClick:a[3]||(a[3]=y=>g("update:route","SignUp"))}," Sign Up ")])])])}}});const q=E(ce,[["__scopeId","data-v-ddb9d8f0"]]),I=o=>(L("data-v-eba6ddfd"),o=o(),R(),o),me=I(()=>e("legend",{class:"legend"},"Create an Account",-1)),pe={class:"row"},_e=I(()=>e("button",{class:"google-sign-up"},null,-1)),ge=I(()=>e("div",{class:"row"},[e("span",{class:"or"},"OR Create Account via Email")],-1)),fe={class:"row name-area"},he={class:"first-name-area"},ve=I(()=>e("label",null,"First Name",-1)),we={key:0,class:"guide-message"},ke={class:"last-name-area"},Ie=I(()=>e("label",null,"Last Name",-1)),Ce={key:0,class:"guide-message"},ye={class:"row"},Ve=I(()=>e("label",null,"Email Address",-1)),Ae={key:0,class:"guide-message"},$e={class:"row"},be=I(()=>e("label",null,"Password",-1)),Se={key:0,class:"guide-message"},xe={class:"row"},Pe=I(()=>e("label",null,"Confirm Password",-1)),Ue={key:0,class:"guide-message"},Ne={class:"row"},Be=x({__name:"SignUp",emits:["update:route"],setup(o,{emit:g}){const d=w(""),n=w(""),u=w(""),r=w(""),c=w(""),C=/^(?=.*[a-zA-Z])(?=.*[0-9]).{8,16}$/,v=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,l=A("defaultInstance"),i=A("emitter"),t=z({firstName:!1,lastName:!1,pw:!1,email:!1,pwConfirm:!1}),$=s=>{d.value=s,d.value.trim().length>0?t.firstName=!1:t.firstName=!0},P=s=>{n.value=s,n.value.trim().length>0?t.lastName=!1:t.lastName=!0},b=s=>{const f=v.test(s);u.value=s,f?t.email=!1:t.email=!0},U=s=>{const f=C.test(s);r.value=s,f?t.pw=!1:t.pw=!0},m=s=>{c.value=s,r.value!==c.value?t.pwConfirm=!0:t.pwConfirm=!1},a=()=>{d.value.trim().length==0&&(t.firstName=!0),n.value.trim().length==0&&(t.lastName=!0),u.value.trim().length==0&&(t.email=!0),r.value.trim().length==0&&(t.pw=!0),c.value.trim().length==0&&(t.pwConfirm=!0),Object.values(t).indexOf(!0)==-1&&(i.emit("update:loading",{isLoading:!0}),l.post(B.join,{firstName:d.value,lastName:n.value,password:r.value,email:u.value,role:"user"},{transformRequest:(s,f)=>{delete f.Authorization}}).then(s=>{"data"in s.data&&(g("update:route","SignIn"),i.emit("update:loading",{isLoading:!1}),i.emit("update:alert",{isActive:!0,message:"회원가입이 완료되었으며, 인증 메일이 발송되었습니다."}))}).catch(s=>{i.emit("update:loading",{isLoading:!1}),i.emit("update:alert",{isActive:!0,message:"이미 존재하는 아이디입니다."})}))};return(s,f)=>{const y=V("FontAwesomeIcon"),S=V("BaseInput"),j=V("BaseButton");return _(),h("form",{class:"sign-up-form",onKeydown:f[1]||(f[1]=N=>{N.keyCode===13&&N.preventDefault()})},[e("fieldset",null,[me,e("div",pe,[_e,p(y,{icon:"xmark",class:"close-button",onClick:f[0]||(f[0]=N=>g("update:route","SignIn"))})]),ge,e("div",fe,[e("div",he,[ve,p(S,{type:"text","onUpdate:modelValue":$,modelValue:d.value,placeholder:"first name"},null,8,["modelValue"]),t.firstName?(_(),h("p",we," Please enter your first name. ")):k("",!0)]),e("div",ke,[Ie,p(S,{type:"text","onUpdate:modelValue":P,modelValue:n.value,placeholder:"last name"},null,8,["modelValue"]),t.lastName?(_(),h("p",Ce," Please enter your last name. ")):k("",!0)])]),e("div",ye,[Ve,p(S,{type:"text","onUpdate:modelValue":b,modelValue:u.value,placeholder:"email"},null,8,["modelValue"]),t.email?(_(),h("p",Ae," Please enter the correct email format. ")):k("",!0)]),e("div",$e,[be,p(S,{type:"password","onUpdate:modelValue":U,modelValue:r.value,placeholder:"password"},null,8,["modelValue"]),t.pw?(_(),h("p",Se," Please enter between 8 and 16 characters using a mixture of English and numbers. ")):k("",!0)]),e("div",xe,[Pe,p(S,{type:"password","onUpdate:modelValue":m,modelValue:c.value,placeholder:"Confirm Password"},null,8,["modelValue"]),t.pwConfirm?(_(),h("p",Ue," Passwords do not match. ")):k("",!0)]),e("div",Ne,[p(j,{text:"Create an Account",onClick:a})])])],32)}}});const ze=E(Be,[["__scopeId","data-v-eba6ddfd"]]),Le={class:"change-email-wrapper"},Re=e("p",{class:"notice-message"}," Enter your user account's verified email address and we will send you a password reset link. ",-1),Ee={key:0,class:"guide-message"},Ze=x({__name:"ChangePassword",emits:["update:route"],setup(o,{emit:g}){const d=w(""),n=A("defaultInstance"),u=/^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i,r=z({email:!1}),c=A("emitter"),C=l=>{const i=u.test(l);d.value=l,i?r.email=!1:r.email=!0},v=()=>{d.value.trim().length==0&&(r.email=!0),r.email||(c.emit("update:loading",{isLoading:!0}),n.get(F.sendEmailPassword+`?email=${d.value}`,{transformRequest:(l,i)=>{delete i.Authorization}}).then(l=>{console.log(l),c.emit("update:alert",{isActive:!0,message:"이메일로 발송되었습니다."}),c.emit("update:loading",{isLoading:!1})}).catch(l=>{console.log(l),c.emit("update:loading",{isLoading:!1}),c.emit("update:alert",{isActive:!0,message:"존재하지 않는 회원입니다."})}))};return(l,i)=>{const t=V("FontAwesomeIcon");return _(),h("div",Le,[p(t,{icon:"xmark",class:"close-button",onClick:i[0]||(i[0]=$=>g("update:route","SignIn"))}),Re,p(X,{"onUpdate:modelValue":C,modelValue:d.value,type:"text",placeholder:"Email"},null,8,["modelValue"]),r.email?(_(),h("p",Ee," 올바른 이메일 형식을 입력해주세요. ")):k("",!0),p(H,{type:"button",text:"Send password reset email",onClick:v})])}}});const qe=o=>(L("data-v-fd193814"),o=o(),R(),o),Fe=qe(()=>e("img",{src:Y,class:"bg"},null,-1)),je=x({__name:"SignInView",setup(o){const g=Q(q);return(d,n)=>(_(),h("main",null,[Fe,(_(),T(W(g.value),{"onUpdate:route":n[0]||(n[0]=u=>{console.log(u),u=="SignUp"?g.value=ze:u=="ChangePassword"?g.value=Ze:g.value=q})},null,32))]))}});const Ge=E(je,[["__scopeId","data-v-fd193814"]]);export{Ge as default};
